<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>

<chapter xml:id="cha-ha-installation-overview" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Installation overview</title>
  <info>
    <abstract>
      <para>
        This chapter shows an overview of the steps required to set up a working and supported
        &ha; cluster. The steps in this guide include all of the available options for cluster
        installation. To set up a basic two-node cluster with only the default options,
        see <xref linkend="article-installation"/>.
      </para>
    </abstract>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
      <dm:bugtracker></dm:bugtracker>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
  </info>
  <orderedlist>
    <title>Overview of installing a &ha; cluster</title>
    <listitem>
      <para>
        Review <xref linkend="cha-ha-requirements"/> to make sure your nodes and other
        infrastructure meet the requirements for a &ha; cluster.
      </para>
    </listitem>
    <listitem>
      <para>
        You can set up the cluster with either the &rootuser; user or a user with
        <command>sudo</command> privileges. Review <xref linkend="cha-ha-log-in"/>
        to determine the appropriate user for your requirements.
      </para>
    </listitem>
    <listitem>
      <para>
        Install the &ha; extension and packages on the nodes as described in
        <xref linkend="cha-ha-install"/>.
      </para>
    </listitem>
    <listitem>
      <para>
        Set up the cluster on the nodes. You can use either of the following methods:
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <xref linkend="cha-ha-bootstrap-install"/>
          </para>
        </listitem>
        <listitem>
          <para>
            <xref linkend="cha-ha-ycluster"/>
          </para>
        </listitem>
      </itemizedlist>
      <para>
        You can also use a combination of both methods. For example, you could set up one node
        with the &yast; cluster module, then use the bootstrap scripts to add more nodes.
      </para>
      <para>
        The following table shows the components that can be configured by each method:
      </para>
      <informaltable>
        <tgroup cols="3">
        <colspec colname="c1" colwidth="33%"/>
        <colspec colname="c2" colwidth="33%"/>
        <colspec colname="c3" colwidth="34%"/>
          <thead>
            <row>
              <entry>Component</entry>
              <entry>Bootstrap scripts</entry>
              <entry>&yast; cluster module</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Cluster name</entry>
              <entry>Yes</entry>
              <entry>Yes</entry>
            </row>
            <row>
              <entry>&corosync;</entry>
              <entry>Yes</entry>
              <entry>Yes</entry>
            </row>
            <row>
              <entry>&csync;</entry>
              <entry>Yes</entry>
              <entry>Yes</entry>
            </row>
            <row>
              <entry>Firewall ports</entry>
              <entry>Yes</entry>
              <entry>Yes</entry>
            </row>
            <row>
              <entry>Passwordless SSH</entry>
              <entry>Yes</entry>
              <entry>No; configure before setup</entry>
            </row>
            <row>
              <entry>&qdevice;<footnote><para>To configure &qdevice; with either setup method, you
              must set up the &qnet; server <emphasis>before</emphasis> you initialize the cluster.
              See <xref linkend="sec-ha-qdevice-setup-qnetd"/>. Alternatively, you can set up
              &qdevice; later.</para></footnote></entry>
              <entry>Optional</entry>
              <entry>Optional</entry>
            </row>
            <row>
              <entry>&stonith; (node fencing)</entry>
              <entry>Optional (SBD only)<footnote><para>To configure SBD with the bootstrap scripts,
              you must set up shared storage and the watchdog <emphasis>before</emphasis> you
              initialize the cluster. See <xref linkend="sec-ha-storage-protect-watchdog"/>.
              Alternatively, you can set up SBD later.</para></footnote></entry>
              <entry>No; configure after setup</entry>
            </row>
            <row>
              <entry>Virtual IP address for &hawk2;</entry>
              <entry>Yes</entry>
              <entry>No; configure after setup</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </listitem>
    <listitem>
      <para>
        Add more nodes. You can use the bootstrap scripts or the &yast; cluster module,
        or you can clone nodes for mass deployment as described in
        <xref linkend="sec-ha-installation-autoyast"/>.
      </para>
    </listitem>
    <listitem>
      <para>
        To be supported, a &sleha; cluster <emphasis>must</emphasis> have &stonith; (node fencing)
        enabled. A node fencing mechanism can be one of the following:
      </para>
      <itemizedlist>
        <listitem>
          <para>
            A physical device (a power switch). To configure the cluster to use physical
            &stonith; devices, see <xref linkend="cha-ha-fencing"/>.
          </para>
        </listitem>
        <listitem>
          <para>
            SBD (&stonith; Block Device) in combination with a watchdog. To configure
            SBD devices and the watchdog, see <xref linkend="cha-ha-storage-protect"/>.
          </para>
        </listitem>
      </itemizedlist>
    </listitem>
    <listitem>
      <para>
        Continue to <xref linkend="part-config"/> and <xref linkend="part-storage"/> to
        set up cluster resources, data replication, and other components as needed.
      </para>
    </listitem>
  </orderedlist>
</chapter>
