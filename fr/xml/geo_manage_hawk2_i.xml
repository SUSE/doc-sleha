<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_manage_hawk2_i.xml" xml:id="sec.ha.geo.manage.hawk2" version="5.0">
 <title>Avec Hawk2 (HA Web Konsole)</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>modification</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>oui</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>Hawk2 est une interface utilisateur Web pour la gestion des grappes et des grappes géographiques.</para>

  <sect3 xml:id="sec.ha.geo.manage.hawk2.dashboard">

   <title>Surveillance de plusieurs grappes avec le tableau de bord Hawk2</title>
   <para>
    Les informations de grappe affichées dans le <guimenu>tableau de bord</guimenu> sont stockées du côté serveur et synchronisées entre les noeuds de grappe (pour autant qu'un accès SSH sans mot de passe soit configuré entre les noeuds de grappe). Pour plus de détails, reportez-vous au manuel <citetitle>Administration Guide</citetitle> (Guide d'administration) pour <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase>, disponible à l'adresse <link xlink:href="http://www.suse.com/documentation/"/>. Reportez-vous au chapitre <citetitle>Running Cluster Reports Without <systemitem class="username">root</systemitem> Access</citetitle> (Exécution de rapports de grappe sans accès root), section <citetitle>Configuring a Passwordless SSH Account</citetitle> (Configuration d'un compte SSH sans mot de passe). Notez toutefois que la machine sur laquelle vous exécutez Hawk2 ne doit pas nécessairement faire partie d'une grappe particulière ; il peut s'agir d'un système distinct et indépendant.
   </para>
  <procedure xml:id="pro.ha.config.hawk2.geo.dashboard">
   <title>Surveillance de plusieurs grappes avec Hawk2</title>
   <itemizedlist>
    <title>Conditions préalables</title>
    <listitem>
     <para> Toutes les grappes à surveiller à partir du <guimenu>tableau de bord</guimenu> de Hawk2 doivent exécuter <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>. Il n'est pas possible de surveiller des grappes qui exécutent des versions antérieures de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase>. </para>
    </listitem>
    <listitem>
     <para>Si vous n'avez pas remplacé le certificat auto-signé pour Hawk2 par votre propre certificat (ou un certificat signé par une autorité de certification officielle) sur chaque noeud de grappe, connectez-vous à Hawk2 sur <emphasis>chaque</emphasis> noeud dans <emphasis>chaque</emphasis> grappe au moins une fois. Vérifiez le certificat (ou ajoutez une exception dans le navigateur afin d'ignorer l'avertissement).
     </para>
    </listitem>
   </itemizedlist>
   <step>
    <para> Démarrez le service Web Hawk2 sur une machine à utiliser pour la surveillance de plusieurs grappes : </para>
    <screen><prompt role="root">root # </prompt><command>systemctl</command> start hawk</screen>
   </step>
   <step>
    <para> Démarrez un navigateur Web et, comme URL, spécifiez l'adresse IP ou le nom d'hôte de la machine qui exécute Hawk2 :</para>
    <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para> Connectez-vous à l'interface Web de Hawk2. </para>
   </step>
   <step>
    <para>Dans la barre de navigation de gauche, sélectionnez <guimenu>Tableau de bord</guimenu>. </para>
   </step>
   <step>
    <para>Pour ajouter des tableaux de bord pour plusieurs grappes, cliquez sur <guimenu>Ajouter une grappe</guimenu>.</para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="95%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <substeps>
     <step>
      <para> Entrez un <guimenu>nom de grappe</guimenu> personnalisé permettant d'identifier la grappe dans le <guimenu>tableau de bord</guimenu>. </para>
     </step>
     <step>
      <para>Entrez le <guimenu>nom d'hôte d'un noeud de la grappe</guimenu>.</para>
     </step>
    
     <step>
      <para>Confirmez vos modifications en cliquant sur <guimenu>Ajouter</guimenu>.</para>
     </step>
     <step>
      <para> Pour ajouter d'autres grappes au tableau de bord, cliquez à nouveau sur <guimenu>Ajouter une grappe</guimenu> et entrez les détails de la grappe suivante. </para>
      <figure>
       <title>Hawk2 — Tableau de bord</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </substeps>
   </step>
   <step>
    <para> Pour supprimer une grappe du tableau de bord, cliquez sur l'icône <literal>x</literal> en regard du nom de la grappe. </para>
   </step>
   <step>
    <para> Pour afficher les détails d'une grappe, entrez un mot de passe et cliquez sur <guimenu>Connecter</guimenu>. </para>
    <para> Hawk2 affiche un résumé reprenant l'état des noeuds, ressources et tickets respectifs. Cliquez sur un nom de grappe pour accéder à la vue <guimenu>État</guimenu> de la grappe en question. Cette vue vous permet de gérer la grappe comme d'habitude.</para>
   </step>
  </procedure>
   <para>
    Toute modification d'état des noeuds ou des ressources est reflétée presque immédiatement dans le <guimenu>tableau de bord</guimenu>.
   </para>
  </sect3>
 <sect3 xml:id="sec.ha.geo.manage.hawk2.tickets">
  <title>Gestion des tickets avec Hawk2</title>
  <para>
   Les tickets sont visibles dans Hawk2 s'ils ont été accordés ou révoqués au moins une fois ou s'ils sont référencés dans le cadre d'une dépendance de ticket. </para>
  <para>Hawk2 affiche les états de ticket suivants :</para>
  <itemizedlist>
   <listitem>
    <para><guimenu>Accordé</guimenu> : tickets accordés au site actuel.</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Ailleurs</guimenu> : tickets accordés à un autre site.</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Révoqué</guimenu> : tickets qui ont été révoqués. Par ailleurs, Hawk2 affiche également les tickets comme révoqués s'ils sont référencés dans le cadre d'une dépendance de ticket, mais n'ont pas encore été accordés à un site.</para>
   </listitem>
  </itemizedlist>
  <note>
   <title>octroi de tickets au site actuel et révocation de tickets</title>
   
   <para> Même si Hawk2 permet d'afficher les tickets pour tous les sites, toutes les opérations d'octroi ou de révocation déclenchées par Hawk2 s'appliquent uniquement au site actuel (auquel vous êtes connecté avec Hawk2). Pour accorder un ticket à un autre site de votre grappe géographique, démarrez Hawk2 sur un des noeuds de grappe appartenant au site respectif.</para>
   <para>Vous ne pouvez accorder des tickets que s'ils ne sont pas encore octroyés à un site.</para>
  </note>

  <procedure xml:id="pro.ha.config.hawk2.viewtickets">
   <title>Affichage, octroi et révocation de tickets avec Hawk2</title>

   <step>
    <para> Lancez un navigateur Web et connectez-vous à Hawk2. </para>
   </step>
   <step>
    <para> Dans la barre de navigation de gauche, sélectionnez <guimenu>État</guimenu>.</para>
    <para> Outre des informations sur les noeuds et ressources de grappe, Hawk2 affiche également une catégorie <guimenu>Tickets</guimenu>. Cette catégorie affiche l'état du ticket, l'ID de la contrainte qui fait référence au ticket et le nom du ticket. La catégorie <guimenu>Ticket</guimenu> contient également deux colonnes pour la gestion des tickets.</para>
   </step>
   <step>
    <para> Pour afficher les détails d'un ticket particulier, cliquez sur l'icône <guimenu>Détails</guimenu> en regard du ticket. Une fenêtre indique si le ticket a déjà été accordé, quel attribut <guimenu>Loss Policy</guimenu> a été défini (dans l'éventualité où un ticket a été révoqué d'un site) et les ressources qui dépendent du ticket.</para>
    <figure>
     <title>Hawk2 — Détails d'un ticket</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para> Pour révoquer un ticket accordé au site actuel ou pour accorder un ticket au site actuel, cliquez sur le commutateur dans la colonne <guimenu>Accordé</guimenu> en regard du ticket. Lorsque vous cliquez, il affiche l'opération disponible. Confirmez votre choix lorsque Hawk2 vous y invite. </para>
    <para> Si le ticket ne peut pas être accordé ou révoqué pour une raison quelconque, Hawk2 affiche un message d'erreur. Si le ticket a été accordé ou révoqué, Hawk2 met à jour son <guimenu>état</guimenu>. </para>
   </step>
  </procedure>
  <para>
   <remark>taroth 2015-11-02: according to dzyuzin, simulating granting and revoking tickets with
    hawk2 does not work yet, therefore commenting the following procedure</remark>
  </para>
  
  
 </sect3>
 </sect2>
