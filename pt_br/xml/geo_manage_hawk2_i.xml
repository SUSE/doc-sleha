<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_manage_hawk2_i.xml" xml:id="sec.ha.geo.manage.hawk2" version="5.0">
 <title>Com o HA Web Konsole (Hawk2)</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>editando</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes (sim)</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>O Hawk2 é uma interface do usuário baseada na Web para gerenciamento de clusters e clusters Geo.</para>

  <sect3 xml:id="sec.ha.geo.manage.hawk2.dashboard">

   <title>Monitorando vários clusters com o painel de controle do Hawk2</title>
   <para>
    As informações de cluster exibidas no <guimenu>Painel</guimenu> são armazenadas no servidor e sincronizadas entre os nós do cluster (se o acesso SSH sem senha entre os nós do cluster foi configurado). Para obter detalhes, consulte o <citetitle>Guia de Administração</citetitle> da <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase>, disponível em <link xlink:href="http://www.suse.com/documentation/"/>. Consulte o capítulo <citetitle>Executando relatórios de cluster sem acesso de <systemitem class="username">root</systemitem></citetitle>, seção <citetitle>Configurando uma conta SSH sem senha</citetitle>. No entanto, a máquina na qual você executa o Hawk2 não precisa nem mesmo fazer parte de nenhum cluster para essa finalidade, ela pode ser um sistema separado não relacionado.
   </para>
  <procedure xml:id="pro.ha.config.hawk2.geo.dashboard">
   <title>Monitorando vários clusters com o Hawk2</title>
   <itemizedlist>
    <title>Pré-requisitos</title>
    <listitem>
     <para> Todos os clusters que serão monitorados do <guimenu>Painel</guimenu> do Hawk2 devem executar a <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>. Não é possível monitorar clusters que executam versões anteriores da <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase>. </para>
    </listitem>
    <listitem>
     <para>Se você não substituiu o certificado autoassinado do Hawk2 em cada nó do cluster pelo seu próprio certificado (ou um certificado assinado por uma Autoridade de Certificação oficial), efetue login no Hawk2 em <emphasis>cada</emphasis> nó de <emphasis>cada</emphasis> cluster pelo menos uma vez. Verifique o certificado (ou adicione uma exceção ao browser para ignorar o aviso).
     </para>
    </listitem>
   </itemizedlist>
   <step>
    <para> Inicie o serviço Web Hawk2 na máquina que será usada para monitorar vários clusters: </para>
    <screen><prompt role="root">root # </prompt><command>systemctl</command> start hawk</screen>
   </step>
   <step>
    <para> Inicie um browser da Web e, como URL, digite o endereço IP ou nome de host da máquina que executa o Hawk2:</para>
    <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para> Efetue login na interface da Web do Hawk2. </para>
   </step>
   <step>
    <para>Na barra de navegação esquerda, selecione <guimenu>Painel</guimenu>. </para>
   </step>
   <step>
    <para>Para adicionar painéis de controle para vários clusters, clique em <guimenu>Adicionar Cluster</guimenu>.</para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="95%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <substeps>
     <step>
      <para> Digite um <guimenu>Nome do cluster</guimenu> personalizado para identificar o cluster no <guimenu>Painel</guimenu>. </para>
     </step>
     <step>
      <para>Digite o <guimenu>Nome de host do nó no cluster</guimenu>.</para>
     </step>
    
     <step>
      <para>Confirme as mudanças com <guimenu>Adicionar</guimenu>.</para>
     </step>
     <step>
      <para> Para adicionar mais clusters ao painel de controle, clique em <guimenu>Adicionar Cluster</guimenu> novamente e digite os detalhes do próximo cluster. </para>
      <figure>
       <title>Hawk2 — Painel de Controle</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </substeps>
   </step>
   <step>
    <para> Para remover um cluster do painel de controle, clique no ícone <literal>x</literal> ao lado do nome do cluster. </para>
   </step>
   <step>
    <para> Para ver os detalhes sobre um cluster, digite uma senha e clique em <guimenu>Conectar</guimenu>. </para>
    <para> O Hawk2 mostra a você um resumo com o status dos respectivos nós, recursos e tickets. Clique em um nome de cluster para ser levado à tela <guimenu>Status</guimenu> do cluster, na qual você pode administrá-lo como de costume.</para>
   </step>
  </procedure>
   <para>
    Quaisquer mudanças de status nos nós ou recursos são refletidas quase imediatamente no <guimenu>Painel</guimenu>.
   </para>
  </sect3>
 <sect3 xml:id="sec.ha.geo.manage.hawk2.tickets">
  <title>Gerenciando tickets com o Hawk2</title>
  <para>
   Os tickets estão visíveis no Hawk2 se eles foram concedidos ou revogados pelo menos uma vez ou se foram mencionados em uma dependência de ticket. </para>
  <para>O Hawk2 exibe os seguintes status de ticket:</para>
  <itemizedlist>
   <listitem>
    <para><guimenu>Concedido</guimenu>: Tickets que foram concedidos ao site atual.</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Em outro lugar</guimenu>: Tickets que foram concedidos a outro site.</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Revogado</guimenu>: Tickets que foram revogados. Além disso, o Hawk2 também exibe os tickets como revogados se eles foram mencionados em uma dependência de ticket, mas ainda não foram concedidos a nenhum site.</para>
   </listitem>
  </itemizedlist>
  <note>
   <title>Concedendo tickets ao site atual e revogando tickets</title>
   
   <para> Embora você possa ver os tickets de todos os sites com o Hawk2, qualquer operação de concessão ou revogação acionada pelo Hawk2 aplica-se apenas ao site atual (ao qual você está conectado com o Hawk2). Para conceder um ticket a outro site do cluster Geo, inicie o Hawk2 em um dos nós do cluster que pertencem ao respectivo site.</para>
   <para>É possível apenas conceder tickets que ainda não foram fornecidos a nenhum site.</para>
  </note>

  <procedure xml:id="pro.ha.config.hawk2.viewtickets">
   <title>Vendo, concedendo e revogando tickets com o Hawk2</title>

   <step>
    <para> Inicie um browser da Web e efetue login no Hawk2. </para>
   </step>
   <step>
    <para> Na barra de navegação esquerda, selecione <guimenu>Status</guimenu>.</para>
    <para> Juntamente com as informações sobre os nós e recursos do cluster, o Hawk2 exibe uma categoria de <guimenu>Tickets</guimenu>. Ele lista o status do ticket, o ID da restrição que faz referência ao ticket e o nome do ticket. A categoria <guimenu>Ticket</guimenu> também contém duas colunas para gerenciar os tickets.</para>
   </step>
   <step>
    <para> Para mostrar detalhes de determinado ticket, clique no ícone <guimenu>Detalhes</guimenu> ao lado do ticket. Uma janela mostra se o ticket já foi concedido, qual <guimenu>Política de Perdas</guimenu> foi definida (no caso de um ticket ser revogado de um site) e os recursos que dependem do ticket.</para>
    <figure>
     <title>Hawk2 — Detalhes do Ticket</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para> Para revogar um ticket concedido do site atual ou para conceder um ticket ao site atual, clique no switch na coluna <guimenu>Concedido</guimenu> ao lado do ticket. Ao clicar nele, a ação disponível é exibida. Confirme sua seleção quando o Hawk2 solicitar. </para>
    <para> Se o ticket não puder ser concedido ou revogado por qualquer motivo, o Hawk2 mostrará uma mensagem de erro. Se o ticket foi concedido ou revogado com êxito, o Hawk2 atualiza o <guimenu>Status</guimenu> do ticket. </para>
   </step>
  </procedure>
  <para>
   <remark>taroth 2015-11-02: according to dzyuzin, simulating granting and revoking tickets with
    hawk2 does not work yet, therefore commenting the following procedure</remark>
  </para>
  
  
 </sect3>
 </sect2>
