<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_trouble_i.xml" version="5.0" xml:id="sec.ha.geo.trouble">


 <title>疑難排解</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>編輯</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  Booth 使用的記錄機制與 CRM 相同。因此，變更記錄層級也會影響 booth 記錄。booth 記錄訊息還包含任一票證的相關資訊。
 </para>

 <para>
  booth 記錄訊息與 booth 組態檔案均會包含在 <command>crm report</command> 中。
 </para>

 <para>
  如果出現未預期的 booth 行為或任何問題，請使用 <command>sudo journalctl -n</command> 檢查記錄資料，或使用 <command>crm report</command> 建立詳細的叢集報告。
 </para>

 <para>
  如果可以透過 SSH 從單一主機存取所有網站上的叢集節點 (包括仲裁方)，則可以在同一份 <literal>crm 報告</literal>中收集所有節點的記錄檔案。使用 <option>-n</option> 選項呼叫 <command>crm report</command> 時，可以從使用 <option>-n</option> 指定的所有主機中取得記錄檔案。(如果不使用 <option>-n</option>，該指令會嘗試從相應的叢集中取得節點清單)。例如，若要建立一份 <literal>crm 報告</literal>，其中包含來自兩個雙節點叢集 (<literal>192.168.201.111</literal>|<literal>192.168.201.112</literal> 和 <literal>192.168.202.111</literal>|<literal>192.168.202.112</literal>) 及仲裁方 (<literal>147.2.207.14</literal>) 的記錄檔案，請使用以下指令：
 </para>

<screen><prompt role="root">root # </prompt> crm report -n "147.2.207.14 192.168.201.111 192.168.201.112 \
 192.168.202.111 192.168.202.112"  -f 10:00 -t 11:00 db-incident</screen>

 <para>
  如果問題只與 booth 相關，並且您知道 booth 在 (網站內的) 哪些叢集節點上執行，請僅指定這兩個節點和仲裁方。
 </para>

 <para>
  如果無法從一部主機存取所有網站，請在仲裁方以及各網站的叢集節點上分別執行 <command>crm report</command>，請記得指定相同的時間段。若要收集仲裁方上的記錄檔案，必須為單一節點操作使用 <option>-S</option> 選項：
 </para>

<screen>amsterdam # crm report -f 10:00 -t 11:00 db-incident-amsterdam
berlin # crm report -f 10:00 -t 11:00 db-incident-berlin
arbitrator # crm report -S -f 10:00 -t 11:00 db-incident-arbitrator</screen>

 <para>
  但是，對於想要從中收集記錄檔案的所有機器，最好是產生一份 <literal>crm 報告</literal>。
 </para>
</sect1>
