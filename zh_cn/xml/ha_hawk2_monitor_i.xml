<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_hawk2_monitor_i.xml" version="5.0" xml:id="sec-conf-hawk2-monitor">
 <title>监视群集</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:maintainer/>
   <dm:status>编辑</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>yes</dm:translation>
   <dm:languages/>
   <dm:release/>
   <dm:repository/>
  </dm:docmanager>
 </info>

 <para>
  Hawk2 提供不同的屏幕用于监视单个群集和多个群集：<guimenu>状态</guimenu>和<guimenu>仪表板</guimenu>屏幕。
 </para>

 <sect2 xml:id="sec-conf-hawk2-manage-monitor-status">
  <title>监视单个群集</title>
  <para>
   要监视单个群集，请使用<guimenu>状态</guimenu>屏幕。当您登录 Hawk2 后，默认会显示<guimenu>状态</guimenu>屏幕。右上角的图标会一目了然地显示群集状态。如需更多细节，请查看以下类别：
  </para>
  <variablelist>
   <varlistentry>
    <term>错误</term>
    <listitem>
     <para>
      如果发生了错误，会显示在页面顶部。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>资源</term>
    <listitem>
     <para>
      显示配置的资源，包括它们的<guimenu>状态</guimenu>、<guimenu>名称</guimenu> (ID)、<guimenu>位置</guimenu>（运行资源的节点）和资源代理<guimenu>类型</guimenu>。在<guimenu>操作</guimenu>列中，您可以启动或停止资源，触发多个操作或查看细节。可以触发的操作包括将资源设置为维护模式（或去除维护模式）、将其迁移到其他节点、清理资源、显示任何最近的事件，或编辑资源。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>节点</term>
    <listitem>
     <para>
      显示属于您登录的群集站点的节点，包括节点的<guimenu>状态</guimenu>和<guimenu>名称</guimenu>。在<guimenu>维护</guimenu>和<guimenu>待机</guimenu>列中，您可以为节点设置或去除<literal>维护</literal>或<literal>待机</literal>标志。<guimenu>操作</guimenu>列可用于查看节点的最近事件或更多细节：例如，查看是否为相应节点设置了 <literal>utilization</literal>、<literal>standby</literal> 或 <literal>maintenance</literal> 属性。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>票据</term>
    <listitem>
     <para>
      仅当已配置了票据的情况下才显示（用于与 Geo 群集配合使用）。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <figure pgwide="0">
   <title>Hawk2 - 群集状态</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-cluster-status-main.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-cluster-status-main.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-manage-monitor-dash">
  <title>监视多个群集</title>
  <para>
   要监视多个群集，请使用 Hawk2 <guimenu>仪表板</guimenu>。<guimenu>仪表板</guimenu>屏幕中显示的群集信息储存在服务器端。群集节点之间会同步这些信息（如果已配置群集节点之间的无口令 SSH 访问权限）。有关详细信息，请参见<xref linkend="sec-crmreport-nonroot-ssh"/>。不过，运行 Hawk2 的计算机甚至不需要属于任何群集也可实现该目的，它可以是不相关的独立系统。
  </para>
  <para>
   除了一般的 <xref linkend="sec-conf-hawk2-req" xrefstyle="select:title"/>之外，还需要满足以下先决条件才能使用 Hawk2 监视多个群集：
  </para>
  <itemizedlist>
   <title>先决条件</title>
   <listitem>
    <para>
     要通过 Hawk1 的<guimenu>仪表板</guimenu>监视的所有群集必须运行 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles"> 15 SP2</phrase></phrase>。
    </para>
   </listitem>
   <listitem>
    <para>
     如果您之前未在每个群集节点上用自己的证书（或官方证书颁发机构签名的证书）替换 Hawk2 的自我签名证书，请执行以下操作：在<emphasis>每个</emphasis>群集的<emphasis>每个</emphasis>节点上至少登录 Hawk2 一次。验证证书（或在浏览器中添加例外以绕过警告）。否则，Hawk2 将无法连接到群集。
    </para>
   </listitem>
  </itemizedlist>
  <procedure xml:id="pro-conf-hawk2-dashboard">
   <title>使用 仪表板监视多个群集</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice><guimenu>监视</guimenu>
     <guimenu>仪表板</guimenu></menuchoice>。
    </para>
    <para>
    Hawk2 会显示当前群集站点的资源和节点的概述。此外，它还会显示已配置为与 Geo 群集配合使用的所有<guimenu>票据</guimenu>。如需有关此视图中所用图标的信息，请单击<guimenu>图例</guimenu>。要搜索资源 ID，请在<guimenu>搜索</guimenu>文本框中输入名称 (ID)。若只想显示特定节点，请单击过滤器图标并选择一个过滤选项。
   </para>
   <figure>
    <title>包含一个群集站点 (<literal>amsterdam</literal>) 的 Hawk2 仪表板</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="hawk2-dashboard-site1.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="hawk2-dashboard-site1.png" width="95%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   </step>
   <step>
    <para>
     要为多个群集添加仪表板，请执行以下操作：
    </para>
    <substeps>
     <step>
      <para>
       单击<guimenu>添加群集</guimenu>。
      </para>
     </step>
     <step>
      <para>
       输入用于在<guimenu>仪表板</guimenu>中标识该群集的<guimenu>群集名称</guimenu>。例如，<literal>berlin</literal>。
      </para>
     </step>
     <step>
      <para>
       输入第二个群集的其中一个节点的完全限定主机名。例如，<literal>charlie</literal>。
      </para>
      <informalfigure>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </informalfigure>
     </step>
     <step>
      <para>
       单击<guimenu>添加</guimenu>。Hawk2 会为新添加的群集站点显示另一个选项卡，其中会列出该群集站点的节点和资源的概述。
      </para>
      <note>
       <title>连接错误</title>
       <para>如果系统提示您输入口令来登录此节点，则表明您可能未连接到该节点且未替换自我签名证书。在此情况下，即使在输入口令之后，连接也将失败，并显示以下讯息：<literal>连接服务器时出错。每隔 5 秒钟重试一次...</literal>
       </para>
       <para>
        要继续，请参见<xref linkend="vle-trouble-hawk2-cert"/>。
       </para>
      </note>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     要查看群集站点的更多细节或管理群集站点，请切换到站点的选项卡并单击锁链图标。
    </para>
    <para>
     Hawk2 会在新的浏览器窗口或选项卡中打开此站点的<guimenu>状态</guimenu>视图。在此视图中，您可以管理 Geo 群集的这部分内容。
    </para>
   </step>
   <step>
    <para>
     要从仪表板中去除某个群集，请单击该群集细节右侧的 <literal>x</literal> 图标。
    </para>
   </step>
  </procedure>
 </sect2>
</sect1>
