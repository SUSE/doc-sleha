<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_upgrade_i.xml" version="5.0" xml:id="sec.ha.geo.upgrade">
 <title>Actualización a la última versión del producto</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>editar</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>sí</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para> Para obtener instrucciones generales sobre cómo actualizar un clúster, consulte la <citetitle>Guía de administración</citetitle> de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>, disponible en <link xlink:href="http://www.suse.com/documentation/"/>. En el capítulo <citetitle>Actualización del clúster y de los paquetes de software</citetitle> también se describen los preparativos necesarios antes de iniciar el proceso de actualización. </para>

 <table xml:id="table.ha.geo.upgrade.oview">
  <title>Vías de actualización admitidas para SLE HA y SLE HA Geo</title>
  <tgroup cols="3">
   <colspec colnum="1" colname="1" colwidth="25*"/>
   <colspec colnum="2" colname="2" colwidth="22*"/>
   <colspec colnum="3" colname="3" colwidth="53*"/>
   <thead>
    <row>
     <entry>
      <para> Actualización (origen y destino) </para>
     </entry>
     <entry>
      <para> Vía de actualización </para>
     </entry>
     <entry>
      <para> Para obtener más detalles, consulte: </para>
     </entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>
      <para> SLE HA 11 SP3 a SLE HA (Geo) 12 </para>
     </entry>
     <entry>
      <para> Migración sin conexión </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guía de distribución de SUSE Linux Enterprise Server 12</citetitle>, parte <citetitle>Actualización de SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guía de administración de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capítulo <citetitle>Actualización del clúster y de los paquetes de software</citetitle>, sección <citetitle>Migración sin conexión</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec.ha.geo.upgrade.offline" xrefstyle="select:title nopage"/>
        </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> SLE HA (Geo) 11 SP4 a SLE HA (Geo) 12 SP1 </para>
     </entry>
     <entry>
      <para> Migración sin conexión </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guía de distribución de SUSE Linux Enterprise Server 12 SP1</citetitle>, parte <citetitle>Actualización de SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guía de administración de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capítulo <citetitle>Actualización del clúster y de los paquetes de software</citetitle>, sección <citetitle>Migración sin conexión</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec.ha.geo.upgrade.arbitrators" xrefstyle="select:title nopage"/> </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> SLE HA (Geo) 12 a SLE HA (Geo) 12 SP1 </para>
     </entry>
     <entry>
      <para> Actualización sobre la marcha </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guía de distribución de SUSE Linux Enterprise Server 12 SP1</citetitle>, parte <citetitle>Actualización de SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guía de administración de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capítulo <citetitle>Actualización del clúster y de los paquetes de software</citetitle>, sección <citetitle>Migración sobre la marcha</citetitle>
        </para>
       </listitem>
       <listitem>
         <para> SLE HA Geo: <xref linkend="sec.ha.geo.upgrade.arbitrators" xrefstyle="select:title nopage"/> </para>
        </listitem>
       </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> SLE HA (Geo) 12 SP1 a SLE HA (Geo) 12 SP2</para>
     </entry>
     <entry>
      <para> Actualización sobre la marcha </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guía de distribución de SUSE Linux Enterprise Server 12 SP2</citetitle>, parte <citetitle>Actualización de SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guía de administración de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP2</citetitle>, capítulo <citetitle>Actualización del clúster y de los paquetes de software</citetitle>, sección <citetitle>Migración sobre la marcha</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec.ha.geo.upgrade.arbitrators" xrefstyle="select:title nopage"/> </para>
       </listitem>
       <listitem>
        <para>DRBD 8 a DRBD 9: <citetitle>Guía de administración de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP2</citetitle>, capítulo <citetitle>DRBD</citetitle>, sección <citetitle>Migración de DRBD 8 a DRBD 9</citetitle>
         </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
   </tbody>
  </tgroup>
 </table>

 <sect2 xml:id="sec.ha.geo.upgrade.offline">
  <title>Migración sin conexión</title>
  <para> Esta sección se aplica a los escenarios siguientes: </para>
  <itemizedlist>
   <listitem>
    <para> Actualización de SLE HA Geo 11 SP3 a SLE HA Geo 12</para>
   </listitem>
  </itemizedlist>
  <para> La versión 0.1 de booth de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 a 11 SP3 se basaba en el algoritmo Paxos. La versión 0.2 de booth de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP4 y <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 y 12 SPx se basa libremente en raft y no es compatible con la versión 0.1. Por lo tanto, no es posible llevar a cabo una actualización sobre la marcha desde ningún sistema donde se ejecute la versión de booth antigua a uno donde se ejecute la nueva. En su lugar, todos los nodos de clúster deben estar sin conexión y el clúster debe migrarse como un conjunto, tal y como se describe en el <xref linkend="pro.ha.geo.upgrade.offline"/>.</para>
  <para> Debido a la nueva función de varios inquilinos, el nuevo guion init del árbitro no puede detener ni comprobar el estado del árbitro Paxos 0.1. Al actualizar a la versión 0.2, el árbitro se detiene, si está en ejecución. El agente de recurso OCF <literal>ocf:pacemaker:booth-site</literal> es capaz de detener y supervisar el daemon del sitio de la versión 0.1 de booth. </para>

  <procedure xml:id="pro.ha.geo.upgrade.offline">
   <title>Realización de una migración de todo el clúster sin conexión</title>
   <step>
    <para>Para llevar a cabo una actualización de los nodos de clúster, siga las instrucciones de la <citetitle>Guía de administración de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capítulo <citetitle>Actualización del clúster y de los paquetes de software</citetitle>, sección <citetitle>Migración sin conexión</citetitle>. </para>
   </step>
   <step>
    <para> Si utiliza árbitros fuera de los sitios de clúster: </para>
    <substeps performance="required">
      <step>
      <para> Actualice cada árbitro a la versión que desee de SUSE Linux Enterprise Server. Para obtener la información sobre los procesos de actualización individuales, consulte la <xref linkend="table.ha.geo.upgrade.oview"/>. </para>
     </step>
     <step>
      <para> Añada la extensión de clústeres geográficos e instale los paquetes como se describe en la <xref linkend="sec.ha.geo.inst.arbitrators"/>. </para>
     </step>
    </substeps>
   </step>
   <step>
    <para> Dado que la sintaxis y el algoritmo de consenso de booth han cambiado, debe actualizar los archivos de configuración de booth para que cumplan los requisitos más recientes. Anteriormente, si lo desea, puede especificar el tiempo de caducidad y ponderaciones añadiéndolos al nombre del ticket con un punto y coma (<literal>;</literal>) como separador. La nueva sintaxis tiene testigos independientes para todas las opciones del ticket. Consulte la <xref linkend="sec.ha.geo.booth"/> para obtener más información. Si no especifica un tiempo de caducidad o ponderaciones distintos a los valores por defecto y no desea usar la función de varios inquilinos, puede seguir utilizando el antiguo archivo <filename>/etc/booth/booth.conf</filename>. </para>
   </step>
   <step>
    <para> Sincronice los archivos de configuración de booth actualizados en todos los sitios de clúster y árbitros. </para>
   </step>
   <step>
    <para> Inicie el servicio de booth en los sitios de clúster y en los árbitros, como se describe en la <xref linkend="sec.ha.geo.setup.booth.service"/>. </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec.ha.geo.upgrade.arbitrators">
  <title>Actualización del árbitro</title>
  <para> Esta sección se aplica a los escenarios siguientes: </para>
  <itemizedlist>
   <listitem>
    <para> Actualización de SLE HA Geo 11 SP4 a SLE HA Geo 12 SP1 </para>
   </listitem>
   <listitem>
    <para> Actualización de SLE HA Geo 12 a SLE HA Geo 12 SP1</para>
   </listitem>
   <listitem>
    <para> Actualización de SLE HA Geo 12 SP1 a SLE HA Geo 12 SP2</para>
   </listitem>
  </itemizedlist>

  <procedure xml:id="pro.ha.geo.upgrade.arbitrators">
   <title>Actualización de los árbitros fuera del clúster</title>
   <para> Si utiliza árbitros fuera de los sitios de clúster, siga estos pasos para cada árbitro:</para>
  <step>
    <para>Lleve a cabo una actualización a la versión de destino que desee de SUSE Linux Enterprise Server. Para obtener la información sobre los procesos de actualización individuales, consulte la <xref linkend="table.ha.geo.upgrade.oview"/>.</para>
   </step>
   <step>
    <para> Añada la extensión de clústeres geográficos e instale los paquetes como se describe en la <xref linkend="sec.ha.geo.inst.arbitrators"/>. </para>
   </step>
  </procedure>
 </sect2>
</sect1>
