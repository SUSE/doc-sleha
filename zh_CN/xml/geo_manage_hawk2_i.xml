<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_manage_hawk2_i.xml" xml:id="sec.ha.geo.manage.hawk2" version="5.0">
 <title>使用 HA Web Konsole (Hawk2)</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>编辑</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>Hawk2 是用于管理群集和地域群集的 Web 用户界面。</para>

  <sect3 xml:id="sec.ha.geo.manage.hawk2.dashboard">

   <title>使用 Hawk2 仪表板监视多个群集</title>
   <para>
    <guimenu>仪表板</guimenu>中显示的群集信息储存在服务器端，并会在群集节点之间同步（如果在群集节点间配置了无口令 SSH 访问）。有关细节，请参见 <link xlink:href="http://www.suse.com/documentation/"/> 上提供的《<citetitle><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 管理指南</citetitle>》。请参见“<citetitle>在不使用 <systemitem class="username">root</systemitem> 访问权限的情况下运行群集报告</citetitle>”一章中的“<citetitle>配置无口令 SSH 帐户</citetitle>”一节。然而，运行 Hawk2 的计算机甚至不需要属于任何群集也可实现该目的 - 该计算机可以是不相关的独立系统。
   </para>
  <procedure xml:id="pro.ha.config.hawk2.geo.dashboard">
   <title>使用 Hawk2 监视多个群集</title>
   <itemizedlist>
    <title>先决条件</title>
    <listitem>
     <para> 要通过 Hawk2 的<guimenu>仪表板</guimenu>监视的所有群集必须运行 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>。无法监视运行旧版 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 的群集。 </para>
    </listitem>
    <listitem>
     <para>如果您没有在每个群集节点上用您自己的证书（或官方证书颁发机构签名的证书）替换 Hawk2 的自我签名证书，请在<emphasis>每个</emphasis>群集的<emphasis>每个</emphasis>节点上至少登录一次 Hawk2。验证证书（或在浏览器中添加例外以绕过警告）。
     </para>
    </listitem>
   </itemizedlist>
   <step>
    <para> 在要用于监视多个群集的计算机上启动 Hawk2 Web 服务。 </para>
    <screen><prompt role="root">root # </prompt><command>systemctl</command> start hawk</screen>
   </step>
   <step>
    <para> 启动 Web 浏览器并输入运行 Hawk2 的计算机的 IP 地址或主机名作为 URL：</para>
    <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para> 登录到 Hawk2 Web 界面。 </para>
   </step>
   <step>
    <para>在左侧导航栏中，选择<guimenu>仪表板</guimenu>。 </para>
   </step>
   <step>
    <para>要添加多个群集的仪表板，请单击<guimenu>添加群集</guimenu>。</para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="95%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <substeps>
     <step>
      <para> 输入自定义的<guimenu>群集名称</guimenu>，用于在<guimenu>仪表板</guimenu>中标识该群集。 </para>
     </step>
     <step>
      <para>输入<guimenu>群集中节点的主机名</guimenu>。</para>
     </step>
    
     <step>
      <para>单击<guimenu>添加</guimenu>确认更改。</para>
     </step>
     <step>
      <para> 要将更多群集添加至仪表板，请再次单击<guimenu>添加群集</guimenu>，然后输入下一个群集的细节。 </para>
      <figure>
       <title>Hawk2 - 仪表板</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </substeps>
   </step>
   <step>
    <para> 要从仪表板中去除某个群集，请单击该群集名称旁边的 <literal>x</literal> 图标。 </para>
   </step>
   <step>
    <para> 要查看群集的相关细节，请输入口令并单击<guimenu>连接</guimenu>。 </para>
    <para> Hawk2 将显示一份摘要，包含相应节点的状态、资源和票据。单击节点名称会显示该节点的<guimenu>状态</guimenu>视图，您可以从该处照常管理节点。</para>
   </step>
  </procedure>
   <para>
    节点或资源的任何状态更改几乎都会在<guimenu>仪表板</guimenu>中立即反映出来。
   </para>
  </sect3>
 <sect3 xml:id="sec.ha.geo.manage.hawk2.tickets">
  <title>使用 Hawk2 管理票据</title>
  <para>
   如果票据至少经过了一次授予或撤消，或者在票据依赖性中加以参照，则您可以在 Hawk2 中看到这些票据。 </para>
  <para>Hawk2 显示以下票据状态：</para>
  <itemizedlist>
   <listitem>
    <para><guimenu>已授予</guimenu>：已将票据授予给当前站点。</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>其他位置</guimenu>：已将票据授予给其他站点。</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>已撤消</guimenu>：已撤消票据。此外，如果在票据依赖性中参照了票据，但尚未将票据授予给任何站点，则 Hawk2 也将票据显示为已撤消。</para>
   </listitem>
  </itemizedlist>
  <note>
   <title>向当前站点授予票据和撤消票据</title>
   
   <para> 尽管您可以使用 Hawk2 查看所有站点的票据，但 Hawk2 触发的任何授予或撤消操作只适用于当前站点（当前使用 Hawk2 连接到的站点）。要将票据授予地域群集的另一个站点，请在属于相应站点的其中一个群集节点上启动 Hawk2。</para>
   <para>只能授予尚未指派给任何站点的票据。</para>
  </note>

  <procedure xml:id="pro.ha.config.hawk2.viewtickets">
   <title>使用 Hawk2 查看、授予和撤消票据</title>

   <step>
    <para> 启动 Web 浏览器并登录到 Hawk2。 </para>
   </step>
   <step>
    <para> 在左侧导航栏中，选择<guimenu>状态</guimenu>。</para>
    <para> 除了群集节点和资源的相关信息之外，Hawk2 还显示<guimenu>票据</guimenu>类别。其中列出了票据状态、参照票据的约束 ID，以及票据名称。<guimenu>票据</guimenu>类别还包含两个用于管理票据的列。</para>
   </step>
   <step>
    <para> 要显示特定票据的细节，请单击该票据旁边的<guimenu>细节</guimenu>图标。此时将出现一个窗口，其中显示是否已授予该票据、设置了哪个<guimenu>丢失策略</guimenu>（适用于从站点中撤消了票据的情况），以及哪些资源依赖于该票据。</para>
    <figure>
     <title>Hawk2 - 票据细节</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para> 要从当前站点中撤消已授予的票据或者要向当前站点授予某个票据，请单击该票据旁边<guimenu>已授予</guimenu>列中的开关。单击后，将显示可用的操作。当 Hawk2 提示确认时，请确认选择。 </para>
    <para> 如果出于任何原因无法授予或撤消票据，Hawk2 将显示错误讯息。如果已成功授予或撤消票据，Hawk2 将更新票据<guimenu>状态</guimenu>。 </para>
   </step>
  </procedure>
  <para>
   <remark>taroth 2015-11-02: according to dzyuzin, simulating granting and revoking tickets with
    hawk2 does not work yet, therefore commenting the following procedure</remark>
  </para>
  
  
 </sect3>
 </sect2>
