<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_trouble_i.xml" version="5.0" xml:id="sec-ha-geo-trouble">


 <title>查错</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>编辑</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  Booth 使用的日志记录机制与 CRM 相同。这样一来，更改日志级别的同时也会影响 booth 日志记录。Booth 日志消息还包含所有票据的信息。
 </para>

 <para>
  Booth 日志讯息和 booth 配置文件均包含在 <command>crm report</command> 中。
 </para>

 <para>
  如果出现意外的 booth 行为或任何问题，请使用 <command>sudo journalctl -n</command> 检查日志数据，或使用 <command>crm report</command> 创建详细的群集报告。
 </para>

 <para>
  如果可以通过 SSH 从单个主机访问所有站点上的群集节点（包括仲裁方），则可以在同一份 <literal>crm 报告</literal>中收集所有节点的日志文件。使用 <option>-n</option> 选项调用 <command>crm report</command> 时，可以从使用 <option>-n</option> 指定的所有主机中获取日志文件。（如果不使用 <option>-n</option>，该命令将尝试从相应的群集获取节点列表）。例如，要创建一份 <literal>crm 报告</literal>，其中包含来自两个双节点群集（<literal>192.168.201.111</literal>|<literal>192.168.201.112</literal> 和 <literal>192.168.202.111</literal>|<literal>192.168.202.112</literal>）和仲裁方 (<literal>147.2.207.14</literal>) 的日志文件，请使用以下命令：
 </para>

<screen><prompt role="root">root # </prompt> crm report -n "147.2.207.14 192.168.201.111 192.168.201.112 \
 192.168.202.111 192.168.202.112"  -f 10:00 -t 11:00 db-incident</screen>

 <para>
  如果问题只与 booth 相关，并且您知道 booth 在（站点内的）哪些群集节点上运行，请仅指定这两个节点和仲裁方。
 </para>

 <para>
  如果无法从一台主机访问所有站点，请在仲裁方以及各站点的群集节点上分别运行 <command>crm report</command>，请记得指定相同的时间段。要收集仲裁方上的日志文件，必须为单个节点操作使用 <option>-S</option> 选项：
 </para>

<screen>amsterdam # crm report -f 10:00 -t 11:00 db-incident-amsterdam
berlin # crm report -f 10:00 -t 11:00 db-incident-berlin
arbitrator # crm report -S -f 10:00 -t 11:00 db-incident-arbitrator</screen>

 <para>
  但是，对于想要从中收集日志文件的所有计算机，最好是生成一份 <literal>crm 报告</literal>。
 </para>
</sect1>
