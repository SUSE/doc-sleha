<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_requirements_i.xml" version="5.0" xml:id="cha-ha-geo-req">
 <title>要求</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:translation>是</dm:translation>
      </dm:docmanager>
    </info>
    <itemizedlist>
  <title>软件要求</title>
  <listitem>
   <para>
    将加入群集的所有计算机（群集节点和仲裁方）上都至少需安装以下模块和扩展：
   </para>
   <itemizedlist>
   <listitem>
    <para>Base System Module <phrase role="productnumber"><phrase os="sles">15 SP2</phrase></phrase></para>
   </listitem>
   <listitem>
    <para>Server Applications Module <phrase role="productnumber"><phrase os="sles">15 SP2</phrase></phrase></para>
   </listitem>
   <listitem>
    <para><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">15 SP2</phrase></phrase></para>
   </listitem>
  </itemizedlist>
   </listitem>
   <listitem>
    <para>
     安装计算机时，请选择 <literal>HA GEO Node</literal> <systemitem>系统角色</systemitem>。如此将安装最小系统，这种情况下，默认会安装模式 <literal>GEO Clustering for High Availability (ha_geo)</literal> 中的软件包。
   </para>
  </listitem>
 </itemizedlist>
 <itemizedlist>
  <title>网络要求</title>
  <listitem>
   <para>
    要用于每个群集站点的虚拟 IP 在 Geo 群集中必须可访问。
   </para>
  </listitem>
  <listitem>
   <para>
     必须可以通过每个投票间实例上的一个 UDP 和 TCP 端口访问站点。这意味着，必须相应地配置通讯双方之间的所有防火墙和 IPsec 隧道。
    </para>
   </listitem>
  <listitem>
    <para>
     可能需要做出其他有关打开更多端口的设置决策（例如，为 DRBD 或数据库复制打开端口）。
    </para>
   </listitem>
 </itemizedlist>

 <itemizedlist>
  <title>其他要求和建议</title>
  <listitem>
   <para>
    所有站点上的所有群集节点应同步到群集外部的 NTP 服务器。有关详细信息，请参见<link xlink:href="https://documentation.suse.com/sles/15-SP2/html/SLES-all/cha-ntp.html">
     <citetitle>《SUSE Linux Enterprise Server <phrase role="productnumber"><phrase os="sles">15 SP2</phrase></phrase> 管理指南》</citetitle></link>。
   </para>
   <para>
    如果节点未同步，将难以分析日志文件和群集报告。
   </para>
  </listitem>
  <listitem>
   <para>
    在 Geo 群集中使用<emphasis>奇数</emphasis>数量的站点。这样可确保在网络连接断开时仍存有大部分站点（从而避免出现节点分裂情形）。如果群集站点的数量为偶数，请使用一个仲裁方来处理票据的自动故障转移。如果您不使用仲裁方，则需要手动处理票据故障转移。
   </para>
  </listitem>
  <listitem>
   <para>
    每个站点上的群集都有一个有意义的名称，例如 <literal>amsterdam</literal> 和 <literal>berlin</literal>。
   </para>
   <para>
    已在相应的 <filename>/etc/corosync/corosync.conf</filename> 文件中定义每个站点的群集名称。
   </para>
<screen>totem {
    [...]
    cluster_name: amsterdam
    }
</screen>
   <para>
    使用下面的 crmsh 命令来更改名称：
   </para>
<screen><prompt role="root">root # </prompt><command>crm</command> cluster rename <replaceable>NEW_NAME</replaceable></screen>
   <para>
    停止 <systemitem class="service">pacemaker</systemitem> 服务然后再将其启动，以使更改生效：
   </para> <screen><prompt role="root">root # </prompt><command>crm</command> cluster restart</screen>
  </listitem>
 <listitem>
   <para>
     不支持在一个群集中采用混合体系结构。但是，对于 Geo 群集而言，Geo 群集的每个成员（群集站点或仲裁方）可以采用不同的体系结构。例如，您可以运行一个包含三个成员（两个群集站点和一个仲裁方）的 Geo 群集，其中的一个群集站点在 IBM Z 上运行，另一个群集站点在 x86 上运行，仲裁方在 POWER 上运行。
   </para>
 </listitem>
</itemizedlist>
</chapter>
