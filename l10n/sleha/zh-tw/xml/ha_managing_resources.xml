<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_managing_resources.xml" xml:id="cha-ha-manage-resources" xml:lang="zh-tw" version="5.1">
 <title>管理叢集資源</title>
 <info>
  <abstract>
   <para>
    設定叢集中的資源後，可使用叢集管理工具啟動、停止、清理、移除或移轉資源。本章介紹如何使用 Hawk2 或 crmsh 執行資源管理任務。
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

<sect1 xml:id="sec-ha-resource-show">
 <title>顯示叢集資源</title>
 <sect2 xml:id="sec-ha-manual-config-show">
  <title>使用 crmsh 顯示叢集資源</title>
  <para>
   當管理叢集時，<command>crm configure show</command> 指令會列出叢集組態、全域選項、基本資源等目前 CIB 物件：
  </para>
  <screen><prompt role="root"># </prompt><command>crm configure show</command>
node 178326192: alice
node 178326448: bob
primitive admin_addr IPaddr2 \
       params ip=192.168.2.1 \
       op monitor interval=10 timeout=20
primitive stonith-sbd stonith:external/sbd \
       params pcmk_delay_max=30
property cib-bootstrap-options: \
       have-watchdog=true \
       dc-version=1.1.15-17.1-e174ec8 \
       cluster-infrastructure=corosync \
       cluster-name=hacluster \
       stonith-enabled=true \
       placement-strategy=balanced \
       standby-mode=true
rsc_defaults rsc-options: \
       resource-stickiness=1 \
       migration-threshold=3
op_defaults op-options: \
       timeout=600 \
       record-pending=true</screen>
  <para>
   如果您有許多資源，<command>show</command> 的輸出會十分冗長。為限制輸出，請使用資源名稱。例如，如果只想列出基本資源 <systemitem>admin_addr</systemitem> 的屬性，請將資源名稱附加到 <command>show</command> 後：
  </para>
  <screen><prompt role="root"># </prompt><command>crm configure show admin_addr</command>
primitive admin_addr IPaddr2 \
       params ip=192.168.2.1 \
       op monitor interval=10 timeout=20</screen>
  <para>
   但在某些情況下，您可能希望更精確地限制特定資源的輸出。那麼，您可以使用<emphasis>過濾器</emphasis>。過濾器可將輸出限定到特定元件。例如，若要僅列出節點，可使用 <literal>type:node</literal>：
  </para>
  <screen><prompt role="root"># </prompt><command>crm configure show type:node</command>
node 178326192: alice
node 178326448: bob</screen>
  <para>如果您還想列出基本資源，請使用 <literal>or</literal> 運算子：</para>
  <screen><prompt role="root"># </prompt><command>crm configure show type:node or type:primitive</command>
node 178326192: alice
node 178326448: bob
primitive admin_addr IPaddr2 \
       params ip=192.168.2.1 \
       op monitor interval=10 timeout=20
primitive stonith-sbd stonith:external/sbd \
       params pcmk_delay_max=30</screen>
  <para>
   此外，若要搜尋以特定字串開頭的物件，請使用以下表示法：</para>
  <screen><prompt role="root"># </prompt><command>crm configure show type:primitive and 'admin*'</command>
primitive admin_addr IPaddr2 \
       params ip=192.168.2.1 \
       op monitor interval=10 timeout=20</screen>
  <para>
   若要列出所有可用類型，請輸入 <command>crm configure show type:</command>，然後按 <keycap function="tab"/> 鍵。Bash 補齊功能會列出所有類型。
  </para>
 </sect2>
</sect1>

<sect1 xml:id="sec-ha-resource-edit">
 <title>編輯資源和群組</title>
 <para>
  可以使用 Hawk2 或 crmsh 來編輯資源或群組。
 </para>
 <sect2 xml:id="sec-conf-hawk2-manage-edit">
  <title>使用 Hawk2 編輯資源和群組</title>
  <para>
   建立資源後，您隨時都可以編輯其組態，視需要調整參數、操作或中繼屬性。
  </para>
  <procedure xml:id="pro-conf-hawk2-rsc-modify">
   <title>修改資源或群組</title>
   <step>
    <para>
     登入 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     在 Hawk2 的<guimenu>狀態</guimenu>螢幕中，轉到<guimenu>資源</guimenu>清單。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>操作</guimenu>欄中，按一下要修改的資源或群組旁邊的向下箭頭圖示，然後選取<guimenu>編輯</guimenu>。
    </para>
    <para>
     資源組態螢幕隨即開啟。
    </para>
    <figure>
     <title>Hawk2 - 編輯基本資源</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-primitive-edit.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-primitive-edit.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
     <para>
      在組態螢幕頂部，可以選取要執行的操作。
     </para>
     <para>
      如果要編輯基本資源，可以執行以下操作：
     </para>
     <itemizedlist>
      <listitem>
       <para>
        複製資源
       </para>
      </listitem>
      <listitem>
       <para>
        重新命名資源 (變更其 ID)
       </para>
      </listitem>
      <listitem>
       <para>
        刪除資源
       </para>
      </listitem>
     </itemizedlist>
     <para>
      如果要編輯群組，可以執行以下操作：
     </para>
     <itemizedlist>
      <listitem>
       <para>
        建立要新增至此群組的新基本資源
       </para>
      </listitem>
      <listitem>
       <para>
        重新命名群組 (變更其 ID)
       </para>
      </listitem>
      <listitem>
       <para>
        拖動群組成員以變更其排列順序
       </para>
      </listitem>
     </itemizedlist>
   </step>
   <step xml:id="step-hawk2-rsc-modify-params">
    <para>
     若要新增新參數、操作或中繼屬性，請從空白下拉式清單中選取一項。
    </para>
   </step>
   <step>
    <para>
     若要編輯<guimenu>操作</guimenu>類別中的任意值，請按一下相應項目的<guimenu>編輯</guimenu>圖示，為該操作輸入其他值，然後按一下<guimenu>套用</guimenu>。
    </para>
   </step>
   <step>
    <para>
     完成後，按一下資源組態螢幕中的<guimenu>套用</guimenu>按鈕，以確認對參數、操作或中繼屬性所做的變更。
    </para>
    <para>
     螢幕頂部的訊息會顯示動作是否成功。
    </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec-conf-crm-manage-edit">
  <title>使用 crmsh 編輯群組</title>
  <para>
   若要變更群組成員的順序，請在 <command>modgroup</command> 子指令中使用 <command>configure</command> 指令。例如，使用下面的指令可將基本資源 <literal>Email</literal> 移到 <literal>Public-IP</literal> 前面：
  </para>
<screen><prompt role="custom">crm(live)configure# </prompt><command>modgroup g-mailsvc add Email before Public-IP</command></screen>
  <para>
   若要從群組中移除某個資源 (例如，<literal>Email</literal>)，請使用以下指令：
  </para>
<screen><prompt role="custom">crm(live)configure# </prompt><command>modgroup g-mailsvc remove Email</command></screen>
 </sect2>
</sect1>

<sect1 xml:id="sec-ha-resource-start">
 <title>啟動叢集資源</title>
  <para>
   啟動叢集資源之前，請先確定該資源已正確設定。例如，如果使用 Apache 伺服器做為叢集資源，請先設定 Apache 伺服器。完成 Apache 組態後再在叢集中啟動相應資源。
  </para>
  <note>
   <title>不要操作叢集所管理的服務</title>
   <para>
    當您正透過 High Availability Extension 管理某個資源時，就不能再啟動或停止該資源 (例如，不能在叢集之外手動啟動或停止，或者在開機或重新開機時啟動或停止)。High Availability Extension 軟體負責所有服務的啟動或停止動作。
   </para>
   <para>
    不過，如果您要檢查服務是否正確設定，請手動將其啟動，但務必在 High Availability Extension 接管之前將它再次停止。
   </para>
   <para>
    若要對叢集目前管理的資源進行干預，請先將資源設定為 <literal>maintenance mode</literal>。如需詳細資料，請參閱<xref linkend="pro-ha-maint-mode-rsc-hawk2"/>。
   </para>
  </note>
  <para>
   可以使用 Hawk2 或 crmsh 來啟動叢集資源。
  </para>
 <sect2 xml:id="sec-conf-hawk2-manage-start">
  <title>使用 Hawk2 啟動叢集資源</title>
  <para>
   透過 Hawk2 建立資源時，您可以使用 <literal>target-role</literal> 中繼屬性設定該資源的初始狀態。如果將其值設定為 <literal>stopped</literal>，則資源建立後不會自動啟動。
  </para>
  <procedure xml:id="pro-hawk2-rsc-start">
   <title>啟動新資源</title>
   <step>
    <para>
     登入 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     從左側導覽列中，選取<menuchoice><guimenu>監控</guimenu>
     <guimenu>狀態</guimenu></menuchoice>。<guimenu>資源</guimenu>清單還會顯示<guimenu>狀態</guimenu>。
    </para>
   </step>
   <step>
    <para>
     選取要啟動的資源。在其<guimenu>操作</guimenu>欄中，按一下<guimenu>啟動</guimenu>圖示。若要繼續，請對顯示的訊息進行確認。
    </para>
   </step>
  </procedure>
  <para>
   資源啟動後，Hawk2 會將資源的<guimenu>狀態</guimenu>變為綠色，並顯示目前執行該資源的節點。
  </para>
  </sect2>

  <sect2 xml:id="sec-ha-manual-config-start">
   <title>使用 crmsh 啟動叢集資源</title>
   <para>
    若要啟動新叢集資源，需要提供相應的識別碼。
   </para>
   <procedure>
    <title>使用 crmsh 啟動叢集資源</title>
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入並啟動 <command>crm</command> 互動式外圍程序：
     </para>
 <screen><prompt role="root"># </prompt><command>crm</command></screen>
    </step>
    <step>
     <para>
      切換至資源層級：
     </para>
 <screen><prompt role="custom">crm(live)# </prompt><command>resource</command></screen>
    </step>
    <step>
     <para>
      使用 <command>start</command> 啟動資源，然後按 <keycap function="tab"/> 鍵顯示所有已知資源：
     </para>
 <screen><prompt role="custom">crm(live)resource# </prompt><command>start <replaceable>ID</replaceable></command></screen>
    </step>
   </procedure>
  </sect2>
 </sect1>

<sect1 xml:id="sec-ha-resource-stop">
 <title>停止叢集資源</title>
 <sect2 xml:id="sec-ha-manual-config-stop">
  <title>使用 crmsh 停止叢集資源</title>
  <para>
   若要停止一或多個現有叢集資源，需要提供相應的識別碼。
  </para>
  <procedure>
   <title>使用 crmsh 停止叢集資源</title>
   <step>
    <para>
     以 <systemitem class="username">root</systemitem> 身分登入並啟動 <command>crm</command> 互動式外圍程序：
    </para>
<screen><prompt role="root"># </prompt><command>crm</command></screen>
   </step>
   <step>
    <para>
     切換至資源層級：
    </para>
<screen><prompt role="custom">crm(live)# </prompt><command>resource</command></screen>
   </step>
   <step>
    <para>
     使用 <command>stop</command> 停止資源，然後按 <keycap function="tab"/> 鍵顯示所有已知資源：
    </para>
<screen><prompt role="custom">crm(live)resource# </prompt><command>stop <replaceable>ID</replaceable></command></screen>
    <para>
     您一次可以停止多個資源：
    </para>
    <screen><prompt role="custom">crm(live)resource# </prompt><command>stop <replaceable>ID1</replaceable> <replaceable>ID2</replaceable></command> ...</screen>
   </step>
  </procedure>
 </sect2>
</sect1>

<sect1 xml:id="sec-ha-resource-clean">
 <title>清理叢集資源</title>
 <para>
   資源失敗時會自動重新啟動，但每次失敗都會增加該資源的失敗計數。
  </para>
  <para>
   如果為資源設定了 <literal>migration-threshold</literal>，則當失敗次數達到移轉限定值時，節點將不再執行該資源。
  </para>
  <para>
   可以自動重設資源的失敗計數 (透過設定資源的 <literal>failure-timeout</literal> 選項)，也可使用 Hawk2 或 crmsh 手動重設。
  </para>
 <sect2 xml:id="sec-conf-hawk2-manage-cleanup">
  <title>使用 Hawk2 清理叢集資源</title>
  <procedure xml:id="pro-hawk2-clean">
   <title>清理資源</title>
   <step>
    <para>
     登入 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     從左側導覽列中，選取<guimenu>狀態</guimenu>。<guimenu>資源</guimenu>清單還會顯示<guimenu>狀態</guimenu>。
    </para>
   </step>
   <step>
    <para>
     轉到資源，進行清理。在<guimenu>操作</guimenu>欄中，按一下向下箭頭按鈕並選取<guimenu>清理</guimenu>。若要繼續，請對顯示的訊息進行確認。
    </para>
    <para>
     如此即會執行 <command>crm resource cleanup</command> 指令，並在所有節點上清理該資源。
    </para>
   </step>
  </procedure>
  </sect2>

  <sect2 xml:id="sec-ha-manual-config-cleanup">
   <title>使用 crmsh 清理叢集資源</title>
   <procedure>
    <title>使用 crmsh 清理資源</title>
    <step>
     <para>
      開啟外圍程序並以 <systemitem class="username">root</systemitem> 使用者身分登入。
     </para>
    </step>
    <step>
     <para>
      取得所有資源的清單：
     </para>
 <screen><prompt role="root"># </prompt><command>crm resource list</command>
  ...
 Resource Group: dlm-clvm:1
         dlm:1  (ocf:pacemaker:controld) Started
         clvm:1 (ocf:heartbeat:lvmlockd) Started</screen>
    </step>
    <step>
     <para>
      例如，若要清理資源 <literal>dlm</literal>：
     </para>
 <screen><prompt role="root"># </prompt><command>crm resource cleanup dlm</command></screen>
    </step>
   </procedure>
  </sect2>
 </sect1>

<sect1 xml:id="sec-ha-resource-remove">
 <title>移除叢集資源</title>
  <para>
   若要從叢集中移除資源，請依照下面的 Hawk2 或 crmsh 程序操作，以免出現組態錯誤。
  </para>
 <sect2 xml:id="sec-conf-hawk2-manage-remove">
  <title>使用 Hawk2 移除叢集資源</title>
  <procedure xml:id="pro-hawk2-rsc-rm">
   <title>移除叢集資源</title>
   <step>
    <para>
     登入 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     依照<xref linkend="pro-hawk2-clean"/> 中的說明在所有節點上清理該資源。
    </para>
   </step>
   <step>
    <para>
     停止資源：
    </para>
    <substeps>
     <step>
      <para>
       從左側導覽列中，選取<menuchoice><guimenu>監控</guimenu>
       <guimenu>狀態</guimenu></menuchoice>。<guimenu>資源</guimenu>清單還會顯示<guimenu>狀態</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>操作</guimenu>欄中，按一下資源旁邊的<guimenu>停止</guimenu>按鈕。
      </para>
     </step>
     <step>
      <para>
       若要繼續，請對顯示的訊息進行確認。
      </para>
      <para>
       資源停止後，<guimenu>狀態</guimenu>欄將會反映此變化。
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     刪除資源：
    </para>
    <substeps>
     <step>
      <para>
       從左側導覽列中，選取<menuchoice><guimenu>組態</guimenu> <guimenu>編輯組態</guimenu></menuchoice>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>資源</guimenu>清單中前往相應的資源。在<guimenu>操作</guimenu>欄中，按一下資源旁邊的<guimenu>刪除</guimenu>圖示。
      </para>
     </step>
     <step>
      <para>
       若要繼續，請對顯示的訊息進行確認。
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
  </sect2>

  <sect2 xml:id="sec-ha-manual-config-remove">
   <title>使用 crmsh 移除叢集資源</title>
   <procedure>
    <title>使用 crmsh 移除叢集資源</title>
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入並啟動 <command>crm</command> 互動式外圍程序：
     </para>
 <screen><prompt role="root"># </prompt><command>crm configure</command></screen>
    </step>
    <step>
     <para>
      執行下列指令以取得資源清單：
     </para>
 <screen><prompt role="custom">crm(live)# </prompt><command>resource status</command></screen>
     <para>
      例如，輸出可能如下所示 (其中<quote>myIP</quote>是資源的相應識別碼)：
     </para>
 <screen>myIP    (ocf:IPaddr:heartbeat) ...</screen>
    </step>
    <step>
     <para>
      刪除具有相應識別碼的資源 (此操作還隱含 <command>commit</command> 動作)：
     </para>
 <screen><prompt role="custom">crm(live)# </prompt><command>configure delete <replaceable>YOUR_ID</replaceable></command></screen>
    </step>
    <step>
     <para>
      提交變更：
     </para>
 <screen><prompt role="custom">crm(live)# </prompt><command>configure commit</command></screen>
    </step>
   </procedure>
  </sect2>
 </sect1>

<sect1 xml:id="sec-ha-resource-migrate">
 <title>移轉叢集資源</title>
  <para>
   當軟體或硬體發生故障時，叢集會自動對資源進行容錯移轉 (移轉)，具體情況視您可以定義的特定參數 (例如移轉限定值或資源粘性) 而定。您也可以手動將資源移轉至叢集中的其他節點，或將其從目前節點移出，讓叢集決定將資源放置在哪裡。
  </para>
  <para>
   可以使用 Hawk2 或 crmsh 來移轉叢集資源。
  </para>
 <sect2 xml:id="sec-conf-hawk2-manage-migrate">
  <title>使用 Hawk2 移轉叢集資源</title>
  <procedure xml:id="pro-hawk2-rsc-migrate">
   <title>手動移轉資源</title>
   <step>
    <para>
     登入 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     從左側導覽列中，選取<menuchoice><guimenu>監控</guimenu>
     <guimenu>狀態</guimenu></menuchoice>。<guimenu>資源</guimenu>清單還會顯示<guimenu>狀態</guimenu>。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>資源</guimenu>清單中選取相應的資源。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>操作</guimenu>欄中，按一下向下箭頭按鈕並選取<guimenu>移轉</guimenu>。
    </para>
   </step>
   <step>
    <para>
     隨後開啟的視窗中會提供以下選項：
    </para>
    <itemizedlist>
     <listitem>
      <para>
       <guimenu>從目前節點移出</guimenu>：此選項會為目前節點建立一個分數為 <literal>-INFINITY</literal> 的位置條件約束。
      </para>
     </listitem>
     <listitem>
      <para>
       或者，您也可以將資源移到另一節點上。如此會建立一個位置條件約束，其目的節點的分數為 <literal>INFINITY</literal>。
      </para>
     </listitem>
    </itemizedlist>
   </step>
   <step>
    <para>
     確認您的選擇。
    </para>
   </step>
  </procedure>
  <para>
   若要讓資源回到原來的狀態，請執行下列步驟：
  </para>
  <procedure xml:id="pro-hawk2-rsc-migrate-back">
   <title>取消移轉資源</title>
   <step>
    <para>
     登入 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     從左側導覽列中，選取<menuchoice><guimenu>監控</guimenu>
     <guimenu>狀態</guimenu></menuchoice>。<guimenu>資源</guimenu>清單還會顯示<guimenu>狀態</guimenu>。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>資源</guimenu>清單中前往相應的資源。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>操作</guimenu>欄中，按一下向下箭頭按鈕並選取<guimenu>清除</guimenu>。若要繼續，請對顯示的訊息進行確認。
    </para>
    <para>
     Hawk2 會使用 <command>crm_resource </command> <option>--clear</option> 指令。資源可以移回其原始位置，也可以保留在目前的位置 (具體取決於資源粘性)。
    </para>
   </step>
  </procedure>
  <para>
   如需詳細資訊，請參閱 <link xlink:href="http://www.clusterlabs.org/pacemaker/doc/"/> 上的 <citetitle>Pacemaker Explained</citetitle>。請參閱 <citetitle>Resource Migration</citetitle> 部分。
  </para>
  </sect2>

  <sect2 xml:id="sec-ha-manual-config-migrate">
   <title>使用 crmsh 移轉叢集資源</title>
   <para>
    可以使用 <command>move</command> 指令來完成這項任務。例如，若要將資源 <literal>ipaddress1</literal> 移轉至名為 <systemitem class="domainname">bob</systemitem> 的叢集節點，請使用以下指令：
   </para>
 <screen><prompt role="root"># </prompt><command>crm resource</command>
 <prompt role="custom">crm(live)resource# </prompt><command>move ipaddress1 bob</command></screen>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-ha-config-basics-tags">
  <title>使用標記對資源分組</title>
  <para>
   使用標記可以一次參考多個資源，而無需在這些資源之間建立任何並存或順序關係。這個功能在把概念上相關的資源分組在一起時將十分實用。例如，如果有多個資源與某個資料庫相關，您可以建立名為 <literal>databases</literal> 的標記，並將與該資料庫相關的所有資源新增至此標記。這樣，只需使用一個指令就能停止或啟動所有這些資源。
  </para>
  <para>
   在條件約束中也可以使用標記。例如，以下位置條件約束 <literal>loc-db-prefer</literal> 會套用至標記為 <literal>databases</literal> 的資源集：
  </para>
<screen>location loc-db-prefer databases 100: alice</screen>
  <para>
   可以使用 Hawk2 或 crmsh 來建立標記。
  </para>

  <sect2 xml:id="sec-conf-hawk2-rsc-tag">
   <title>使用 Hawk2 透過標記對資源分組</title>
   <procedure xml:id="pro-conf-hawk2-tag">
    <title>新增標記</title>
    <step>
     <para>
      登入 Hawk2：
     </para>
 <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
    </step>
    <step>
     <para>
      從左側導覽列中，選取<menuchoice>
      <guimenu>組態</guimenu> <guimenu>新增資源</guimenu> <guimenu>標記</guimenu> </menuchoice>。
     </para>
    </step>
    <step>
     <para>
      輸入唯一的<guimenu>標記 ID</guimenu>。
     </para>
    </step>
    <step>
     <para>
      從<guimenu>物件</guimenu>清單中選取要與標記關聯的資源。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>建立</guimenu>完成組態。螢幕頂部的訊息會顯示動作是否成功。
     </para>
    </step>
   </procedure>
   <figure>
    <title>Hawk2 - 標記</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="hawk2-tag.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="hawk2-tag.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="sec-ha-manual-config-tag">
   <title>使用 crmsh 透過標記對資源分組</title>
   <para>
    例如，如果有多個資源與某個資料庫相關，您可以建立名為 <literal>databases</literal> 的標記，並將與該資料庫相關的所有資源新增至此標記：
   </para>
 <screen><prompt role="root"># </prompt><command>crm configure tag databases: db1 db2 db3</command></screen>
   <para>
    這樣，只需使用一個指令就能啟動所有這些資源：
   </para>
 <screen><prompt role="root"># </prompt><command>crm resource start databases</command></screen>
   <para>
    同樣，您也可以一次性停止所有這些資源：
   </para>
 <screen><prompt role="root"># </prompt><command>crm resource stop databases</command></screen>
  </sect2>
</sect1>

</chapter>
