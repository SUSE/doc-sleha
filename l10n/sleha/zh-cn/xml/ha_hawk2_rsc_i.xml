<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_hawk2_rsc_i.xml" version="5.0" xml:id="sec-conf-hawk2-rsc">
 <title>配置群集资源</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:maintainer/>
   <dm:status>editing</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>yes</dm:translation>
   <dm:languages/>
   <dm:release/>
   <dm:repository/>
  </dm:docmanager>
 </info>

 <para>
  群集管理员需要为群集中服务器上运行的每个资源或应用程序创建群集资源。群集资源可包括网站、邮件服务器、数据库、文件系统、虚拟机和任何其他基于服务器的应用程序或对用户随时都可用的服务。
 </para>

 <para>
  有关可创建的资源类型的概述，请参见<xref linkend="sec-ha-config-basics-resources-types"/>。当您指定资源基本信息（ID、类、提供程序和类型）后，Hawk2 会显示以下类别：
 </para>

 <variablelist>
  <varlistentry>
   <term>参数（实例属性）</term>
   <listitem>
    <para>
     确定资源控制的服务实例。有关详细信息，请参见<xref linkend="sec-ha-config-basics-inst-attr"/>。
    </para>
    <para>
     创建资源时，Hawk2 会自动显示所有必要的参数。对这些参数进行编辑，以便拥有有效的资源配置。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>操作</term>
   <listitem>
    <para>
     为监视资源所需。有关详细信息，请参见<xref linkend="sec-ha-config-basics-operations"/>。
    </para>
    <para>
     创建资源时，Hawk2 会显示最重要的资源操作（<literal>monitor</literal>、<literal>start</literal> 和 <literal>stop</literal>）。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>元属性</term>
   <listitem>
    <para>
     告知 CRM 如何处理特定资源。有关详细信息，请参见<xref linkend="sec-ha-config-basics-meta-attr"/>。
    </para>
    <para>
     创建资源时，Hawk2 会自动列出该资源的重要元属性，例如，定义资源初始状态的 <literal>target-role</literal> 属性。默认情况下，该属性设置为 <literal>Stopped</literal>，因此资源不会立即启动。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>利用率</term>
   <listitem>
    <para>
     告知 CRM 某个资源需从节点获取的容量。有关详细信息，请参见<xref linkend="sec-config-hawk2-utilization"/>。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  您可以在创建资源期间或之后调整这些类别中的项和值。
 </para>

 <sect2 xml:id="sec-conf-hawk2-rsc-show">
  <title>显示当前群集配置 (CIB)</title>
  <para>
   群集管理员有时需要知道群集配置。Hawk2 可以 crm 外壳语法、XML 和图表形式显示当前配置。要查看 crm 外壳语法形式的群集配置，请从左侧导航栏中选择<menuchoice><guimenu>配置</guimenu>
   <guimenu>编辑配置</guimenu></menuchoice>，并单击<guimenu>显示</guimenu>。要改为以原始 XML 显示配置，请单击 <guimenu>XML</guimenu>。单击<guimenu>示意图</guimenu>会以图表显示 CIB 中配置的节点和资源。它还会显示各资源之间的关系。
  </para>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-wizard">
  <title>使用向导添加资源</title>
  <para>
   Hawk2 向导是设置简单资源（如虚拟 IP 地址或 SBD STONITH 资源）的便捷方式。对于包含多个资源的复杂配置（例如 DRBD 块设备或 Apache Web 服务器的资源配置）而言，这种方法也十分有用。向导会引导您完成所有配置步骤，并提供您需要输入的参数的相关信息。
  </para>
  <procedure xml:id="pro-conf-hawk2-wizard">
   <title>使用资源向导</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice><guimenu>配置</guimenu>
     <guimenu>向导</guimenu></menuchoice>。
    </para>
   </step>
   <step>
    <para>
     单击各个类别旁边的向下箭头图标将其展开，然后选择所需的向导。
    </para>
   </step>
   <step>
    <para>
     按照屏幕指导执行操作。完成最后的配置步骤后，<guimenu>校验</guimenu>您所输入的值。
    </para>
    <para>
     Hawk2 会显示它将执行的操作以及配置的最终成果。根据配置，您可能会收到提示要求输入 <systemitem class="username">root</systemitem> 口令才能<guimenu>应用</guimenu>配置。
    </para>
   </step>
  </procedure>
  <figure pgwide="0">
   <title>Hawk2 - Apache Web 服务器向导</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-wizard-apache.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-wizard-apache.png" width="100%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-primitive">
  <title>添加简单资源</title>
  <para>
   要创建最基本类型的资源，请执行以下操作：
  </para>
  <procedure xml:id="pro-conf-hawk2-primitive-add">
   <title>添加原始资源</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice>
     <guimenu>配置</guimenu> <guimenu>添加资源</guimenu> <guimenu>原始资源</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>资源 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     如果存在您要在其基础上设置资源配置的资源模板，请选择相应的<guimenu>模板</guimenu>。有关配置模板的细节，请参见<xref linkend="pro-conf-hawk2-template-add"/>。
    </para>
   </step>
   <step xml:id="step-ha-config-hawk2-primitive-start">
    <para>
     选择要使用的资源代理<guimenu>类</guimenu>：<literal>lsb</literal>、<literal>ocf</literal>、<literal>service</literal>、<literal>stonith</literal> 或 <literal>systemd</literal>。有关详细信息，请参见<xref linkend="sec-ha-config-basics-raclasses"/>。
    </para>
   </step>
   <step>
    <para>
     如果选择了 <literal>ocf</literal> 作为类，则指定 OCF 资源代理的<guimenu>提供程序</guimenu>。OCF 规范允许多个供应商供应相同的资源代理。
    </para>
   </step>
   <step>
    <para>
     从<guimenu>类型</guimenu>列表中，选择要使用的资源代理（例如 <guimenu>IPaddr</guimenu> 或 <guimenu>Filesystem</guimenu>）。将显示该资源代理的简短描述。
    </para>
    <para>
     如此，资源基本信息即指定完成。
    </para>
    <note>
     <para>
      <guimenu>类型</guimenu>列表中提供的选项取决于您选择的<guimenu>类</guimenu>（对于 OCF 资源还取决于<guimenu>提供程序</guimenu>中选择的内容）。
     </para>
    </note>
    <figure>
     <title>Hawk2 - 原始资源</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-primitive-basic.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-primitive-basic.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para>
     要保留 Hawk2 建议的<guimenu>参数</guimenu>、<guimenu>操作</guimenu>和<guimenu>元属性</guimenu>，请单击<guimenu>创建</guimenu>完成配置。如果操作成功，屏幕顶部会显示一条消息。
    </para>
    <para>
     要调整参数、操作或元属性，请参见<xref linkend="sec-conf-hawk2-rsc-modify"/>。要配置资源的<guimenu>利用率</guimenu>属性，请参见<xref linkend="pro-hawk2-utilization-rsc"/>。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-template">
  <title>添加资源模板</title>
  <para>
   要创建大量具有类似配置的资源，定义资源模板是最简单的方式。定义后，便可在基元或特定类型的约束中引用它。有关功能及使用资源模板的详细信息，请参见<xref linkend="sec-ha-config-basics-constraints-templates"/>。
  </para>
  <procedure xml:id="pro-conf-hawk2-template-add">
   <title>添加资源模板</title>
   <para>
    配置资源模板就如同配置原始资源一样。
   </para>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice> <guimenu>配置</guimenu>
     <guimenu>添加资源</guimenu> <guimenu>模板</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>资源 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     按照<xref linkend="pro-conf-hawk2-primitive-add"/>中的指导从<xref linkend="step-ha-config-hawk2-primitive-start" xrefstyle="select:label"/> 开始。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-modify">
  <title>修改资源</title>
  <para>
   如果您之前创建了一个资源，可以随时根据需要调整参数、操作或元属性来编辑其配置。
  </para>
  <procedure xml:id="pro-conf-hawk2-rsc-modify">
   <title>修改资源的参数、操作或元属性</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     在 Hawk2 的<guimenu>状态</guimenu>屏幕中，转到<guimenu>资源</guimenu>列表。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>操作</guimenu>列中，单击要修改的资源或组旁边的向下箭头图标，然后选择<guimenu>编辑</guimenu>。
    </para>
    <para>
     资源配置屏幕即会打开。
    </para>
    <figure>
     <title>Hawk2 - 编辑原始资源</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-primitive-edit.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-primitive-edit.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step xml:id="step-hawk2-rsc-modify-params">
    <para>
     要添加新参数、操作或元属性，请从空下拉框中选择一项。
    </para>
   </step>
   <step>
    <para>
     要编辑<guimenu>操作</guimenu>类别中的任何值，请单击相应项的<guimenu>编辑</guimenu>图标，为该操作输入不同的值，然后单击<guimenu>应用</guimenu>。
    </para>
   </step>
   <step>
    <para>
     完成时，单击资源配置屏幕中的<guimenu>应用</guimenu>按钮确认对参数、操作或元属性所做的更改。
    </para>
    <para>
     如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-stonith">
  <title>添加 STONITH 资源</title>
    <important>
      <title>不支持无 STONITH 的配置</title>
      <itemizedlist>
       <listitem>
        <para>您必须为群集配置节点屏蔽机制。</para>
       </listitem>
       <listitem>
        <para>全局群集选项 <systemitem>stonith-enabled</systemitem> 和 <systemitem>startup-fencing</systemitem> 必须设置为 <literal>true</literal>。如果您更改这些选项，将会失去支持。</para>
       </listitem>
      </itemizedlist>
      </important>
   <para>
   默认情况下，全局群集选项 <literal>stonith-enabled</literal> 设置为 <literal>true</literal>。如果未定义 STONITH 资源，群集将会拒绝启动任何资源。配置一个或多个 STONITH 资源以完成 STONITH 设置。要为 SBD、libvirt (KVM/Xen) 或 vCenter/ESX 服务器添加 STONITH 资源，最简单的方式就是使用 Hawk2 向导（请参见<xref linkend="sec-conf-hawk2-rsc-wizard"/>）。虽然 STONITH 资源的配置过程与其他资源类似，但它们的行为在某些方面有所不同。有关细节，请参见<xref linkend="sec-ha-fencing-config"/>。
  </para>
  <procedure xml:id="pro-conf-hawk2-stonith">
   <title>添加 STONITH 资源</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice>
     <guimenu>配置</guimenu> <guimenu>添加资源</guimenu> <guimenu>原始资源</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>资源 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从<guimenu>类</guimenu>列表，选择资源代理类 <guimenu>stonith</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从<guimenu>类型</guimenu>列表中，选择用于控制 STONITH 设备的 STONITH 插件。该插件的简短描述即会显示。
    </para>
   </step>
   <step>
    <para>
     Hawk2 会自动显示该资源必需的<guimenu>参数</guimenu>。为每个参数输入值。
    </para>
   </step>
   <step>
    <para>
     Hawk2 会显示最重要的资源<guimenu>操作</guimenu>并建议默认值。如果在此处不修改任何设置，Hawk2 会在您确认后立即添加建议的操作及其默认值。
    </para>
   </step>
   <step>
    <para>
     如无更改必要，请保留默认的<guimenu>元属性</guimenu>设置。
    </para>
    <figure>
     <title>Hawk2 - STONITH 资源</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-primitive-stonith.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-primitive-stonith.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para>
     确认更改以创建 STONITH 资源。
    </para>
    <para>
     如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
  <para>
   要完成屏蔽配置，请添加约束。有关详细信息，请参考 <xref linkend="cha-ha-fencing"/>。
  </para>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-group">
  <title>添加群集资源组</title>
  <para>
   某些群集资源依赖于其他组件或资源，这些资源要求每个组件或资源按特定顺序启动，并在同一服务器上运行。为简化此配置，<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 支持使用组。
  </para>
  <para>
   资源组包含一组需要放在一起并按顺序启动和按相反顺序停止的资源。有关资源组的示例以及组及其属性的更多信息，请参见<xref linkend="sec-ha-config-basics-resources-advanced-groups"/>。
  </para>
  <note>
   <title>空组</title>
   <para>
    组必须包含至少一个资源，否则配置无效。创建组时，Hawk2 允许您创建多个原始资源并将它们添加到组中。有关详细信息，请参见<xref linkend="sec-conf-hawk2-manage-edit"/>。
   </para>
  </note>
  <procedure xml:id="pro-conf-hawk2-group">
   <title>添加资源组</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice>
     <guimenu>配置</guimenu> <guimenu>添加资源</guimenu>
     <guimenu>组</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>组 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     要定义组成员，请选择<guimenu>子项</guimenu>列表中的一项或多项。通过使用右侧的<quote>手柄</quote>图标将组成员拖放为需要的顺序对其进行重新排序。
    </para>
   </step>
   <step>
    <para>
     根据需要修改或添加<guimenu>元属性</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>创建</guimenu>以完成配置。如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
  <figure>
   <title>Hawk2 - 资源组</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-rsc-group.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-rsc-group.png" width="100%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-clone">
  <title>添加克隆资源</title>
  <para>
   如果希望特定资源同时在群集中的多个节点上运行，请将这些资源配置为克隆。一个可配置为克隆的资源的例子就是要作为克隆使用的 OCFS2 之类群集文件系统的 <literal>ocf:pacemaker:controld</literal>任何普通的资源或资源组均可克隆。克隆资源的实例的行为方式可能一样。但其配置也可能有所不同，具体取决于克隆资源所在的节点。
  </para>
  <para>
   有关可用类型的资源克隆的概述，请参见<xref linkend="sec-ha-config-basics-resources-advanced-clones"/>。
  </para>
  <note>
   <title>克隆资源的子资源</title>
   <para>
    克隆资源可以包含原始资源或组作为子资源。在 Hawk2 中，创建克隆资源时不能创建或修改子资源。添加克隆资源之前，先创建子资源并根据需要配置它们。有关细节，请参见<xref linkend="sec-conf-hawk2-rsc-primitive"/>或<xref linkend="sec-conf-hawk2-rsc-group"/>。
   </para>
  </note>
  <procedure xml:id="pro-conf-hawk2-clone">
   <title>添加克隆资源</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice> <guimenu>配置</guimenu>
    <guimenu>添加资源</guimenu> <guimenu>克隆</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>克隆 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从<guimenu>子资源</guimenu>列表中，选择原始资源或组作为克隆资源的子资源。
    </para>
   </step>
   <step>
    <para>
     根据需要修改或添加<guimenu>元属性</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>创建</guimenu>以完成配置。如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
  <figure>
   <title>Hawk2 - 克隆资源</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-clone.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-clone.png" width="100%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-ms">
  <title>添加多状态资源</title>
  
  <para>
   多状态资源是克隆的特殊形式。它们可让实例处于两种运行模式之一（<literal>主要/次要</literal>）。多状态资源只能包含一个组或一个常规资源。
  </para>
  <para>
   配置资源监视或约束时，多状态资源与简单资源具有不同的要求。有关细节，请参见 <link xlink:href="http://www.clusterlabs.org/pacemaker/doc/"/> 上的《<citetitle>Pacemaker Explained</citetitle>》（Pacemaker 配置说明）。请参见“<citetitle>Multi-state - Resources That Have Multiple Modes</citetitle>”（多状态 - 具有多个节点的资源）一节。
  </para>
  <note>
   <title>多状态资源的子资源</title>
   <para>
    多状态资源可以包含原始资源或组作为子资源。在 Hawk2 中，在创建多状态资源时不能创建或修改子资源。添加多状态资源之前，先创建子资源并根据需要配置它们。有关细节，请参见<xref linkend="sec-conf-hawk2-rsc-primitive"/>或<xref linkend="sec-conf-hawk2-rsc-group"/>。
   </para>
  </note>
  <procedure xml:id="pro-conf-hawk2-ms">
   <title>添加多状态资源</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice>
     <guimenu>配置</guimenu>  <guimenu>添加资源</guimenu>
     <guimenu>多状态</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>多状态 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从<guimenu>子资源</guimenu>列表中，选择原始资源或组作为多状态资源的子资源。
    </para>
   </step>
   <step>
    <para>
     根据需要修改或添加<guimenu>元属性</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>创建</guimenu>以完成配置。如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-tag">
  <title>使用标记对资源分组</title>
  <para>
   使用标记可以一次性引用多个资源，而无需在这些资源之间创建任何共置或顺序关系。您可以使用标记对概念上相关的资源分组。例如，如果您有多个资源与某个数据库相关，可以将所有相关的资源添加到名为<literal>数据库</literal>的标记中。
  </para>
  <para>
   属于一个标记的所有资源都可通过一个命令启动或停止。
  </para>
  <procedure xml:id="pro-conf-hawk2-tag">
   <title>添加标记</title>
   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     从左侧导航栏中，选择<menuchoice>
     <guimenu>配置</guimenu> <guimenu>添加资源</guimenu> <guimenu>标记</guimenu> </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     输入唯一的<guimenu>标记 ID</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从<guimenu>对象</guimenu>列表中，选择要使用标记引用的资源。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>创建</guimenu>以完成配置。如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
  <figure>
   <title>Hawk2 - 标记</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-tag.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-tag.png" width="100%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-rsc-monitor">
  <title>配置资源监视</title>
  <para>
   High Availability Extension 不仅会检测到节点故障，还会检测到节点上各资源的失败情况。如果要确保资源正在运行，则为其配置资源监视。通常，资源仅会在运行时受到群集的监视。但是，为了检测并发违例，还需为停止的资源配置监视。要进行资源监视，请指定超时和/或启动延迟值及间隔。间隔告诉 CRM 检查资源状态的频率。您还可以设置特定参数，如为 <literal>start</literal> 或 <literal>stop</literal> 操作设置 <literal>timeout</literal>。
  </para>
  <procedure xml:id="pro-hawk2-operations">
   <title>添加和修改操作</title>

   <step>
    <para>
     登录 Hawk2：
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     按<xref linkend="pro-conf-hawk2-primitive-add"/>中所述添加资源，或选择要编辑的现有原始资源。
    </para>
    <para>
     Hawk2 会自动显示最重要的<guimenu>操作</guimenu>（<literal>start</literal>、<literal>stop</literal>、<literal>monitor</literal>）并建议默认值。
    </para>
    <para>
     要查看属于每个建议值的属性，请将鼠标悬停在相应的值上。
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-monitor-op.png" width="70%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-monitor-op.png" width="60%"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     要更改针对 <literal>start</literal> 或 <literal>stop</literal> 操作建议的 <literal>timeout</literal> 值，请执行以下操作：
    </para>
    <substeps>
     <step>
      <para>
       单击操作旁边的钢笔图标。
      </para>
     </step>
     <step>
      <para>
       在打开的对话框中，为 <literal>timeout</literal> 参数输入不同的值，例如 <literal>10</literal>，然后确认您的更改。
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     要更改针对 <literal>monitor</literal> 操作建议的<guimenu>间隔</guimenu>值，请执行以下操作：
    </para>
    <substeps>
     <step>
      <para>
       单击操作旁边的钢笔图标。
      </para>
     </step>
     <step>
      <para>
       在打开的对话框中，为监控 <literal>interval</literal> 输入不同的值。
      </para>
     </step>
     <step>
      <para>
       要配置资源停止时针对资源的监视，请执行以下操作：
      </para>
      <substeps>
       <step>
        <para>
         从下面的空下拉框中选择 <literal>role</literal> 这一项。
        </para>
       </step>
       <step>
        <para>
         从<literal>角色</literal>下拉框中，选择<literal>已停止</literal>。
        </para>
       </step>
       <step>
        <para>
         单击<guimenu>应用</guimenu>确认更改并关闭操作对话框。
        </para>
       </step>
      </substeps>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     在资源配置屏幕中确认更改。如果操作成功，屏幕顶部会显示一条消息。
    </para>
   </step>
  </procedure>
  <para>
   有关在资源监视程序检测到故障时将发生的流程，请参见<xref linkend="sec-ha-config-basics-monitoring"/>。
  </para>
  <para>
   要查看资源故障，请切换到 Hawk2 中的<guimenu>状态</guimenu>屏幕，然后选择您感兴趣的资源。在<guimenu>操作</guimenu>列中，单击向下箭头图标并选择<guimenu>最近的事件</guimenu>。随后打开的对话框会列出对资源执行的最近操作。失败事件显示为红色。要查看资源细节，请单击<guimenu>操作</guimenu>列中的放大镜图标。
  </para>
  <figure>
   <title>Hawk2 - 资源细节</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-rsc-details.png" width="70%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-rsc-details.png" width="60%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>
</sect1>
