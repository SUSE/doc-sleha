<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_management.xml" version="5.0" xml:id="app-ha-management">



 <title>群集管理工具（命令行）</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>editing</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  High Availability Extension 附带了一套全面的工具，帮助您从命令行管理群集。本章主要介绍管理 CIB 中的群集配置和群集资源所需的工具。用于管理资源代理的其他命令行工具或用于调试设置（和查错）的工具在<xref linkend="app-ha-troubleshooting"/>中有所介绍。
 </para>
 <note>
  <title>使用 crmsh</title>
  <para>
   此工具仅供专家使用。通常，crm 外壳 (crmsh) 是推荐的群集管理工具。
  </para>
 </note>
 <para>
  以下列表提供了一些与群集管理相关的任务，并简要介绍了完成这些任务所使用的工具：
 </para>
 <variablelist>
  <varlistentry>
   <term>监视群集状态</term>
   <listitem>
    <para>
     <command>crm_mon</command> 命令允许您监视群集的状态和配置。其输出包括节点数、uname、UUID、状态、群集中配置的资源及其各自的当前状态。<command>crm_mon</command> 的输出可显示在控制台上或打印到 HTML 文件。当具有不包含状态部分的群集配置文件时，<command>crm_mon</command> 会按文件中所指定的方式创建节点和资源概览。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_mon</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>管理 CIB</term>
   <listitem>
    <para>
     <command>cibadmin</command> 命令是用于操作 CIB 的低级管理命令。它可用于转储、更新和修改全部或部分 CIB，删除整个 CIB 或执行其他 CIB 管理操作。有关对此工具的用法及命令语法的详细介绍，请参见 <command>cibadmin</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>管理配置更改</term>
   <listitem>
    <para>
     <command>crm_diff</command> 命令可帮助您创建和应用 XML 补丁。这对可视化两个版本的群集配置之间的更改或保存更改可能非常有用，以便以后使用 <command>cibadmin</command> 应用更改。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_diff</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>操作 CIB 属性</term>
   <listitem>
    <para>
     您可以使用 <command>crm_attribute</command> 命令来查询和操作 CIB 中使用的节点属性和群集配置选项。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_attribute</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>验证群集配置</term>
   <listitem>
    <para>
     <command>crm_verify</command> 命令可检查配置数据库 (CIB) 的一致性和其他问题。它可检查包含配置的文件或连接到运行中的群集。它可报告两类问题。虽然警告解决方法已经传达到管理员，但是必须先修复错误，High Availability Extension 才能正常工作。<command>crm_verify</command> 可帮助创建新的或已修改的配置。您可以本地复制运行的群集中的 CIB，编辑它，使用 <command>crm_verify</command> 验证它，然后使用 <command>cibadmin</command> 使新配置生效。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_verify</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>管理资源配置</term>
   <listitem>
    <para>
     <command>crm_resource</command> 命令可在群集上执行各种资源相关的操作。它可以修改已配置资源的定义，启动和停止资源，删除资源或在节点间迁移资源。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_resource</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>管理资源失败计数</term>
   <listitem>
    <para>
     <command>crm_failcount</command> 命令可查询指定节点上每个资源的故障计数。此工具还可用于重设置故障计数，同时允许资源在它多次失败的节点上再次运行。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_failcount</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>管理节点的待机状态</term>
   <listitem>
    <para>
     <command>crm_standby</command> 命令可操作节点的备用属性。备用模式中的所有节点都不再具备主管资源的资格，并且必须移动那里的所有资源。备用模式对执行维护任务（如内核更新）非常实用。从节点删除备用属性，使之再次成为群集中完全处于活动状态的成员。有关对此工具的用法及命令语法的详细介绍，请参见 <command>crm_standby</command> 手册页。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>



</appendix>
