<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_installation_overview.xml" xml:id="cha-ha-installation-overview" xml:lang="zh-cn" version="5.1">
  <title>安装概述</title>
  <info>
    <abstract>
      <para>
        本章概述了设置正常工作且受支持的 High Availability 群集的步骤。如果您想要设置仅使用默认选项的基本双节点群集，请参见<xref linkend="article-installation"/>。
      </para>
    </abstract>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
      <dm:bugtracker/>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
  </info>
    <para>

    </para>
  <procedure xml:id="pro-ha-installation-overview">
    <title>High Availability 群集安装概述</title>
    <step>
      <para>
        查看<xref linkend="cha-ha-requirements"/>，确保您的节点和其他基础架构满足 High Availability 群集的要求。
      </para>
    </step>
    <step>
      <para>
        您可以使用 <systemitem class="username">root</systemitem> 用户身份或具有 <command>sudo</command> 权限的用户设置群集。查看<xref linkend="cha-ha-log-in"/>，根据您的要求选择合适的用户。
      </para>
    </step>
    <step>
      <para>
        按<xref linkend="cha-ha-install"/>所述在节点上安装 High Availability 扩展和软件包。
      </para>
    </step>
    <step performance="optional">
      <para>
        要使用引导脚本配置 SBD，必须在初始化群集<emphasis>之前</emphasis>在每个节点上设置看门狗。SBD（STONITH 块设备）是一种节点屏蔽机制。有关 SBD 的详细信息，请参见<xref linkend="cha-ha-storage-protect"/>。要配置看门狗，请参见<xref linkend="sec-ha-storage-protect-watchdog"/>。
      </para>
      <para>
        或者，您也可以稍后再配置 SBD 或改用物理屏蔽设备。
      </para>
    </step>
    <step performance="optional">
      <para>
        要在设置群集期间配置 QDevice，必须在初始化群集<emphasis>之前</emphasis>设置 QNetd。QDevice 和 QNetd 会参与仲裁决定，特别是当群集的节点数为偶数时。有关 QDevice 的详细信息，请参见<xref linkend="cha-ha-qdevice"/>。要设置 QNetd，请参见<xref linkend="sec-ha-qdevice-setup-qnetd"/>。
      </para>
      <para>
        或者，您也可以稍后再配置 QDevice 和 QNetd。
      </para>
    </step>
    <step>
      <para>
        在节点上初始化群集。可以使用以下任意一种方法：
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <xref linkend="cha-ha-bootstrap-install"/>
          </para>
        </listitem>
        <listitem>
          <para>
            <xref linkend="cha-ha-ycluster"/>
          </para>
        </listitem>
      </itemizedlist>
      <para>
        <xref linkend="tab-ha-installation-overview"/>显示了每种方法都可以配置的组件。请对群集中的所有节点使用相同的设置方法。<emphasis>不</emphasis>建议混用设置方法。
      </para>
      <para>
        如果要进行大规模部署，您也可以按<xref linkend="sec-ha-installation-autoyast"/>中所述克隆节点。我们建议先尝试设置具有两到三个节点的群集，然后再添加更多节点。
      </para>
    </step>
    <step>
      <para>
        要获得支持，SUSE Linux Enterprise High Availability 群集<emphasis>必须</emphasis>启用 STONITH（节点屏蔽）。节点屏蔽机制可以是以下之一：
      </para>
      <itemizedlist>
        <listitem>
          <para>
            物理设备（电源开关）。每个节点必须至少有一个此类设备。建议为每个节点配置多个 STONITH 设备。要将群集配置为使用物理 STONITH 设备，请参见<xref linkend="cha-ha-fencing"/>。
          </para>
        </listitem>
        <listitem>
          <para>
            SBD（STONITH 块设备）与看门狗结合使用。SBD 可以与共享存储设备搭配使用，也可以在无磁盘模式下使用。对于基于磁盘的 SBD，我们建议使用多个 SBD 设备。要配置 SBD，请参见<xref linkend="cha-ha-storage-protect"/>。
          </para>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>
        继续<xref linkend="part-config"/>和<xref linkend="part-storage"/>，根据需要设置群集资源、数据复制和其他组件。
      </para>
    </step>
  </procedure>

  <table pgwide="1" xml:id="tab-ha-installation-overview">
    <title>群集组件：设置方法</title>
    <tgroup cols="3">
    <colspec colname="c1" colwidth="33%"/>
    <colspec colname="c2" colwidth="33%"/>
    <colspec colname="c3" colwidth="34%"/>
      <thead>
        <row>
          <entry>组件</entry>
          <entry>引导脚本</entry>
          <entry>YaST 群集模块</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>身份验证设置</entry>
          <entry>是</entry>
          <entry>是</entry>
        </row>
        <row>
          <entry>群集名称</entry>
          <entry>是</entry>
          <entry>是</entry>
        </row>
        <row>
          <entry>Conntrack 工具</entry>
          <entry>否</entry>
          <entry>是</entry>
        </row>
        <row>
          <entry>Corosync</entry>
          <entry>是</entry>
          <entry>是</entry>
        </row>
        <row>
          <entry>Csync2</entry>
          <entry>是</entry>
          <entry>是</entry>
        </row>
        <row>
          <entry>防火墙端口</entry>
          <entry>是</entry>
          <entry>是</entry>
        </row>
        <row>
          <entry>Hawk2</entry>
          <entry>是</entry>
          <entry>否</entry>
        </row>
        <row>
          <entry>无口令 SSH</entry>
          <entry>是</entry>
          <entry>否；在设置前配置</entry>
        </row>
        <row>
          <entry>QDevice</entry>
          <entry>可选</entry>
          <entry>可选</entry>
        </row>
        <row>
          <entry>STONITH（节点屏蔽）</entry>
          <entry>可选（仅限 SBD）</entry>
          <entry>否；设置后配置</entry>
        </row>
        <row>
          <entry>STONITH 超时设置</entry>
          <entry>是（如果配置了 SBD）</entry>
          <entry>否；设置后配置</entry>
        </row>
        <row>
          <entry>Hawk 的虚拟 IP 地址</entry>
          <entry>是</entry>
          <entry>否</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
</chapter>
