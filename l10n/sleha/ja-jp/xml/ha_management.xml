<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_management.xml" version="5.0" xml:id="app-ha-management">



 <title>クラスタ管理ツール(コマンドライン)</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>editing</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  High Availability Extensionには、クラスタをコマンドラインから管理する際に役立つ、包括的なツールセットが付属しています。この章では、CIBおよびクラスタリソースでのクラスタ構成を管理するために必要なツールを紹介します。リソースエージェントを管理する他のコマンドラインツールや、セットアップのデバッグ(およびトラブルシューティング)に使用するツールについては、<xref linkend="app-ha-troubleshooting"/>で説明されています。
 </para>
 <note>
  <title>crmshの使用</title>
  <para>
   これは、エキスパート専用のツールです。通常、crmシェル(crmsh)を使用したクラスタ管理が推奨されている方法です。
  </para>
 </note>
 <para>
  次のリストは、クラスタ管理に関連するいくつかの作業を示しており、これらの作業を実行するために使用するツールを簡単に説明しています。
 </para>
 <variablelist>
  <varlistentry>
   <term>クラスタのステータスの監視</term>
   <listitem>
    <para>
     <command>crm_mon</command>コマンドでは、クラスタのステータスと設定を監視できます。出力には、ノード数、uname、UUID、ステータス、クラスタで設定されたリソース、それぞれの現在のステータスが含まれます。<command>crm_mon</command>の出力は、コンソールに表示したり、HTMLファイルに出力したりできます。statusセクションのないクラスタ設定ファイルが指定された場合、<command>crm_mon</command>はファイルに指定されたノードとリソースの概要を作成します。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_mon</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>CIBの管理</term>
   <listitem>
    <para>
     <command>cibadmin</command>コマンドは、CIBを操作するための低レベル管理コマンドです。CIBのすべてまたは一部のダンプ、CIBのすべてまたは一部の更新、すべてまたは一部の変更、CIB全体の削除、その他のCIB管理操作に使用できます。このツールの使用法およびコマンド構文に関する詳細については、<command>cibadmin</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>設定の変更の管理</term>
   <listitem>
    <para>
     <command>crm_diff</command>コマンドは、XMLパッチの作成と適用をサポートします。クラスタの環境設定の2つのバージョンの違いを視覚的に確認する場合や、変更を保存しておき、後で<command>cibadmin</command>を使用して適用する場合には便利です。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_diff</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>CIB属性の操作</term>
   <listitem>
    <para>
     <command>crm_attribute</command>コマンドで、CIBで使用されているノード属性およびクラスタ設定オプションを問い合わせて操作できます。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_attribute</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>クラスタ設定の検証</term>
   <listitem>
    <para>
     <command>crm_verify</command>コマンドは、設定データベース(CIB)の整合性およびその他の問題を確認します。設定を含むファイルを確認したり、実行中のクラスタに接続したりできます。2種類の問題を報告します。エラーを解決しないと High Availability Extensionが正常に機能できず、警告の解決は管理者が担当します。<command>cm_verify</command>は新規または変更された設定の作成を支援します。実行中のクラスタのCIBのローカルコピーを作成し、編集し、<command>crm_verify</command>を使用して検証し、新規設定を<command>cibadmin</command>を使用して適用できます。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_verify</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>リソース設定の管理</term>
   <listitem>
    <para>
     <command>crm_resource</command>コマンドは、クラスタ上でリソース関連のさまざまなアクションを実行します。設定されたリソースの定義の変更、リソースの始動と停止、リソースの削除およびノード間でのマイグレートを実行できます。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_resource</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>リソースの失敗回数の管理</term>
   <listitem>
    <para>
     <command>crm_failcount</command>コマンドは、所定のノードのリソースごとの失敗回数を問い合わせます。このツールは、失敗回数のリセットにも使用でき、リソースが頻繁に失敗したノード上で再度実行できるようにします。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_failcount</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>ノードのスタンバイステータスの管理</term>
   <listitem>
    <para>
     <command>crm_standby</command>コマンドは、ノードのスタンバイ属性を操作します。スタンバイモードのノードはすべて、リソースをホストすることができず、そのノードにあるリソースは削除する必要があります。スタンバイモードはカーネルの更新などの保守作業を行う場合に便利です。ノードを再びクラスタの完全にアクティブなメンバーにするには、ノードからスタンバイ属性を削除します。このツールの使用法およびコマンド構文に関する詳細については、<command>crm_standby</command>マニュアルページを参照してください。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>



</appendix>
