<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_hawk2_monitor_i.xml" version="5.0" xml:id="sec-conf-hawk2-monitor">
 <title>クラスタの監視</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:maintainer/>
   <dm:status>editing</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>yes</dm:translation>
   <dm:languages/>
   <dm:release/>
   <dm:repository/>
  </dm:docmanager>
 </info>

 <para>
  Hawk2には、単一のクラスタおよび複数のクラスタを監視するための異なる画面があります: <guimenu>状態</guimenu>画面と<guimenu>ダッシュボード</guimenu>画面。
 </para>

 <sect2 xml:id="sec-conf-hawk2-manage-monitor-status">
  <title>単一クラスタの監視</title>
  <para>
   単一クラスタを監視するには、<guimenu>状態</guimenu>画面を使用します。Hawk2にログインした後で、<guimenu>状態</guimenu>画面がデフォルトで表示されます。右上隅のアイコンに、クラスタの状態の概要が表示されます。詳細情報を参照する場合は、次のカテゴリを確認します。
  </para>
  <variablelist>
   <varlistentry>
    <term>エラー</term>
    <listitem>
     <para>
      エラーが発生した場合、ページの上部に表示されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>リソース</term>
    <listitem>
     <para>
      設定されているリソースが表示されます。その<guimenu>状態</guimenu>、<guimenu>名前</guimenu>(ID)、<guimenu>場所</guimenu>(リソースが実行されているノード)、リソースエージェントの<guimenu>タイプ</guimenu>が含まれます。<guimenu>操作</guimenu>列で、リソースを開始または停止するか、いくつかのアクションをトリガーするか、詳を表示できます。トリガ可能なアクションには、保守モードへのリソースの設定(または保守モードの削除)、リソースの別のノードへの移行、リソースのクリーンアップ、リソースイベントの表示、またはリソースの編集が含まれます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ノード</term>
    <listitem>
     <para>
      ログイン先のクラスタサイトに属するノードが表示されます。ノードの<guimenu>状態</guimenu>および<guimenu>名前</guimenu>が含まれます。<guimenu>Maintenance (保守)</guimenu>および<guimenu>Standby (スタンバイ)</guimenu>列で、<literal>maintenance</literal>または<literal>standby</literal>フラグを設定または解除できます。<guimenu>操作</guimenu>列で、ノードの最新イベントや詳細情報を参照できます。たとえば、それぞれのノードに<literal>utilization</literal>、<literal>standby</literal>、または<literal>maintenance</literal>のどの属性が設定されているかを参照できます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>チケット</term>
    <listitem>
     <para>
      Geoクラスタリングでの使用向けにチケットを設定した場合にのみ表示されます。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <figure pgwide="0">
   <title>Hawk2 - クラスタの状態</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="hawk2-cluster-status-main.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="hawk2-cluster-status-main.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect2>

 <sect2 xml:id="sec-conf-hawk2-manage-monitor-dash">
  <title>複数のクラスタの監視</title>
  <para>
   複数のクラスタを監視するには、Hawk2 <guimenu>Dashboard (ダッシュボード)</guimenu>を使用します。<guimenu>ダッシュボード</guimenu>画面に表示されるクラスタ情報は、サーバ側に保管されています。これらは、クラスタノード間で同期が取られています(クラスタノード間にパスワード不要のSSHアクセスが設定されている場合)。詳細については、<xref linkend="sec-crmreport-nonroot-ssh"/>を参照してください。ただし、Hawk2を実行するマシンは、その目的のためにクラスタの一部である必要はなく、別個の無関係のシステムで構いません。
  </para>
  <para>
   Hawk2で複数のクラスタを監視するには、一般的な<xref linkend="sec-conf-hawk2-req" xrefstyle="select:title"/>に加え、次の前提条件も満たす必要があります。
  </para>
  <itemizedlist>
   <title>前提条件</title>
   <listitem>
    <para>
     Hawk4の<guimenu>ダッシュボード</guimenu>で監視するすべてのクラスタでは、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles"> 15 SP2</phrase></phrase>を実行している必要があります。 
    </para>
   </listitem>
   <listitem>
    <para>
     すべてのクラスタノードにあるHawk2の自己署名証明書を独自の証明書(または公式認証局によって署名された証明書)で置き換えていない場合は、<emphasis></emphasis>「すべての」クラスタの<emphasis></emphasis>「すべての」ノードで、少なくとも1回はHawk2にログインします。証明書を検証します(または、ブラウザで例外を追加して警告をスキップします)。そうしない場合、Hawk2はクラスタに接続できません。
    </para>
   </listitem>
  </itemizedlist>
  <procedure xml:id="pro-conf-hawk2-dashboard">
   <title>ダッシュボードを使用した複数クラスタの監視</title>
   <step>
    <para>
     Hawk2にログインします。
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     左のナビゲーションバーから、<menuchoice><guimenu>監視機能</guimenu>
     <guimenu>ダッシュボード</guimenu></menuchoice> の順に選択します。
    </para>
    <para>
    Hawk2は、現在のクラスタサイトのリソースおよびノードに関する概要を表示します。また、Geoクラスタでの使用向けに設定された<guimenu>チケット</guimenu>を表示します。このビューで使用されているアイコンについての情報が必要な場合は、<guimenu>凡例</guimenu>をクリックします。リソースIDを検索するには、<guimenu>検索</guimenu>テキストボックスに名前(ID)を入力します。特定のノードのみを表示するには、フィルタアイコンをクリックしてフィルタリングオプションを選択します。
   </para>
   <figure>
    <title>最初のクラスタサイト1つのクラスタサイト(<literal>amsterdam</literal>)を表示するHawk2ダッシュボード</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="hawk2-dashboard-site1.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="hawk2-dashboard-site1.png" width="95%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   </step>
   <step>
    <para>
     複数のクラスタにダッシュボードを追加するには、以下の操作を行います。
    </para>
    <substeps>
     <step>
      <para>
       <guimenu>クラスタの追加</guimenu>をクリックします。
      </para>
     </step>
     <step>
      <para>
       <guimenu>ダッシュボード</guimenu>でクラスタを識別するためのクラスタ名を<guimenu>クラスタ名</guimenu>に入力します。たとえば、<literal>berlin</literal>です。
      </para>
     </step>
     <step>
      <para>
       いずれかのノードの完全修飾ホスト名を、2つ目のクラスタに入力します。たとえば、<literal>charlie</literal>です。
      </para>
      <informalfigure>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </informalfigure>
     </step>
     <step>
      <para>
       <guimenu>追加</guimenu>をクリックします。新たに追加されたクラスタサイトに対して、Hawk2は2つ目のタブにノードやリソースの概要を表示します。
      </para>
      <note>
       <title>接続エラー</title>
       <para>パスワードを入力してノードにログインすることを求めるプロンプトが表示された場合、このノードにはまだ接続したことがなく、自己署名証明書を置き換えていない状態です。そのような場合は、パスワードを入力しても、接続は次のメッセージを表示して失敗します。<literal>サーバへの接続エラーです。5秒ごとに再試行します...</literal>
       </para>
       <para>
        続行するには、<xref linkend="vle-trouble-hawk2-cert"/>を参照してください。
       </para>
      </note>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     クラスタサイトやその管理に関する詳細を参照するには、サイトのタブに切り替えてチェーンアイコンをクリックします。
    </para>
    <para>
     Hawk2はこのサイトの<guimenu>ステータス</guimenu>ビューを新しいブラウザウィンドウかタブに表示します。この部分のGeoクラスタをそこから管理できます。
    </para>
   </step>
   <step>
    <para>
     ダッシュボードからクラスタを削除するには、クラスタの詳細の右側にある<literal>x</literal>アイコンをクリックします。
    </para>
   </step>
  </procedure>
 </sect2>
</sect1>
