<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ha_installation_overview.xml" xml:id="cha-ha-installation-overview" xml:lang="ja" version="5.1">
  <title>インストールの概要</title>
  <info>
    <abstract>
      <para>
        この章では、動作するサポート対象の高可用性クラスタを設定する手順の概要について説明します。または、デフォルトのオプションのみを使用して基本的な2ノードクラスタを設定するには、<xref linkend="article-installation"/>を参照してください。
      </para>
    </abstract>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
      <dm:bugtracker/>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
  </info>
    <para>

    </para>
  <procedure xml:id="pro-ha-installation-overview">
    <title>高可用性クラスタのインストールの概要</title>
    <step>
      <para>
        <xref linkend="cha-ha-requirements"/>を確認し、ノードと他のインフラストラクチャが高可用性クラスタの要件を満たしていることを確かめます。
      </para>
    </step>
    <step>
      <para>
        クラスタは、<systemitem class="username">root</systemitem>ユーザ、または<command>sudo</command>権限を持つユーザを使用して設定できます。<xref linkend="cha-ha-log-in"/>を確認し、要件に適したユーザを選択します。
      </para>
    </step>
    <step>
      <para>
        <xref linkend="cha-ha-install"/>の説明に従って、ノードにHigh Availability Extensionとパッケージをインストールします。
      </para>
    </step>
    <step performance="optional">
      <para>
        ブートストラップスクリプトを使用してSBDを設定するには、クラスタを初期化する<emphasis>前に</emphasis>各ノードにウォッチドッグを設定する必要があります。SBD (STONITHブロックデバイス)は、ノードフェンシングメカニズムです。SBDの詳細については、<xref linkend="cha-ha-storage-protect"/>を参照してください。ウォッチドッグを設定するには、<xref linkend="sec-ha-storage-protect-watchdog"/>を参照してください。
      </para>
      <para>
        または、SBDを後で設定したり、代わりに物理的なフェンシングデバイスを使用したりすることもできます。
      </para>
    </step>
    <step performance="optional">
      <para>
        クラスタのセットアップ中にQDeviceを設定するには、クラスタを初期化する<emphasis>前に</emphasis>QNetdを設定する必要があります。QDeviceとQNetdは、特にクラスタのノード数が偶数の場合、クォーラムの決定に参加します。QDeviceの詳細については、<xref linkend="cha-ha-qdevice"/>を参照してください。QNetdの設定については、<xref linkend="sec-ha-qdevice-setup-qnetd"/>を参照してください。
      </para>
      <para>
        または、QDeviceとQNetdを後で設定することもできます。
      </para>
    </step>
    <step>
      <para>
        ノードでクラスタを初期化します。次の方法のいずれかを使用できます。
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <xref linkend="cha-ha-bootstrap-install"/>
          </para>
        </listitem>
        <listitem>
          <para>
            <xref linkend="cha-ha-ycluster"/>
          </para>
        </listitem>
      </itemizedlist>
      <para>
        <xref linkend="tab-ha-installation-overview"/>に、各方法で設定できるコンポーネントを示します。クラスタ内のすべてのノードに対して同じセットアップ方法を使用してください。複数のセットアップ方法を混在させることは推奨<emphasis>しません</emphasis>。
      </para>
      <para>
        <xref linkend="sec-ha-installation-autoyast"/>の説明に従って、ノードのクローンを作成して大量展開することもできます。2個または3個のノードのクラスタセットアップをテストしてから、他のノードを追加することをお勧めします。
      </para>
    </step>
    <step>
      <para>
        サポートされるには、SUSE Linux Enterprise High AvailabilityクラスタでSTONITH (ノードフェンシング)が有効になっている<emphasis>必要があります</emphasis> 。次のいずれかをノードフェンシングメカニズムとして使用できます。
      </para>
      <itemizedlist>
        <listitem>
          <para>
            物理デバイス(電源スイッチ)。各ノードに少なくとも1つのデバイスが必要です。ノードごとに複数のSTONITHデバイスを使用することをお勧めします。物理的なSTONITHデバイスを使用するようにクラスタを設定するには、<xref linkend="cha-ha-fencing"/>を参照してください。
          </para>
        </listitem>
        <listitem>
          <para>
            ウォッチドッグと組み合わせたSBD (STONITHブロックデバイス)。SBDは、共有ストレージまたはディスクレスモードのいずれかで使用できます。ディスクベースのSBDでは、複数のSBDデバイスを推奨します。SBDを設定するには、<xref linkend="cha-ha-storage-protect"/>を参照してください。
          </para>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>
        <xref linkend="part-config"/>および<xref linkend="part-storage"/>に進み、必要に応じてクラスタリソース、データレプリケーション、およびその他のコンポーネントを設定します。
      </para>
    </step>
  </procedure>

  <table pgwide="1" xml:id="tab-ha-installation-overview">
    <title>クラスタコンポーネント: セットアップ方法</title>
    <tgroup cols="3">
    <colspec colname="c1" colwidth="33%"/>
    <colspec colname="c2" colwidth="33%"/>
    <colspec colname="c3" colwidth="34%"/>
      <thead>
        <row>
          <entry>コンポーネント</entry>
          <entry>ブートストラップスクリプト</entry>
          <entry>YaSTクラスタモジュール</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>認証設定</entry>
          <entry>はい</entry>
          <entry>はい</entry>
        </row>
        <row>
          <entry>クラスタ名</entry>
          <entry>はい</entry>
          <entry>はい</entry>
        </row>
        <row>
          <entry>conntrackツール</entry>
          <entry>いいえ</entry>
          <entry>はい</entry>
        </row>
        <row>
          <entry>Corosync</entry>
          <entry>はい</entry>
          <entry>はい</entry>
        </row>
        <row>
          <entry>Csync2</entry>
          <entry>はい</entry>
          <entry>はい</entry>
        </row>
        <row>
          <entry>ファイアウォールポート</entry>
          <entry>はい</entry>
          <entry>はい</entry>
        </row>
        <row>
          <entry>Hawk2</entry>
          <entry>はい</entry>
          <entry>いいえ</entry>
        </row>
        <row>
          <entry>パスワード不要のSSH</entry>
          <entry>はい</entry>
          <entry>いいえ(セットアップ前に設定)</entry>
        </row>
        <row>
          <entry>QDevice</entry>
          <entry>オプション</entry>
          <entry>オプション</entry>
        </row>
        <row>
          <entry>STONITH (ノードフェンシング)</entry>
          <entry>オプション(SBDのみ)</entry>
          <entry>いいえ(セットアップ後に設定)</entry>
        </row>
        <row>
          <entry>STONITHのタイムアウト設定</entry>
          <entry>はい(SBDが設定されている場合)</entry>
          <entry>いいえ(セットアップ後に設定)</entry>
        </row>
        <row>
          <entry>Hawk2の仮想IPアドレス</entry>
          <entry>はい</entry>
          <entry>いいえ</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
</chapter>
